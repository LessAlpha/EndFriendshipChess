function debug(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]}function sayError(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n]}function Po(t,e){return egret.Point.create(t,e)}var egret=window.egret,__reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);n.prototype=e.prototype,t.prototype=new n},AGame;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"param",{set:function(t){this.m_pParam=t},enumerable:!0,configurable:!0}),e.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.$onRemoveFromStage=function(e){void 0===e&&(e=!0),e&&(this.m_pParam=null,this.setSkin(null)),t.prototype.$onRemoveFromStage.call(this)},e}(eui.Component);t.AComponent=e,__reflect(e.prototype,"AGame.AComponent");var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.$hitTest=function(e,n){return this.touchEnabled?t.prototype.$hitTest.call(this,e,n):null},e}(eui.Image);t.AImage=n,__reflect(n.prototype,"AGame.AImage");var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.$onRemoveFromStage=function(e){void 0===e&&(e=!1),e&&this.setSkin(null),t.prototype.$onRemoveFromStage.call(this)},e.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},e}(eui.Button);t.AButton=i,__reflect(i.prototype,"AGame.AButton");var r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.$onRemoveFromStage=function(){this.setSkin(null),t.prototype.$onRemoveFromStage.call(this)},e}(eui.RadioButton);t.ARadioButton=r,__reflect(r.prototype,"AGame.ARadioButton");var o=function(t){function e(){var e=t.call(this)||this;return e.liveDragging=!0,e}return __extends(e,t),e.prototype.onTrackTouchBegin=function(e){t.prototype.onTrackTouchBegin.call(this,e),this.thumb.once(egret.TouchEvent.TOUCH_MOVE,this.onThumbTouchBegin,this)},e.prototype.$onRemoveFromStage=function(){this.setSkin(null),t.prototype.$onRemoveFromStage.call(this)},e}(eui.HSlider);t.AHSlider=o,__reflect(o.prototype,"AGame.AHSlider")}(AGame||(AGame={}));var AGame;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.twAddToStage=null,t.twRemFromStage=null,t.registerEvents(),t}return __extends(n,e),n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){},n.prototype.onCreate=function(){},n.prototype.onDestroy=function(){this.removeEvents(),t.ServiceBuilder.Instance.removeProxy(this)},n.prototype.onRefresh=function(t){},n.prototype.enter=function(t){},n.prototype.resize=function(){},n.prototype.listProxy=function(){return[]},n.prototype.handleProxy=function(t){},n.prototype.resizeOnStageCenter=function(e){void 0===e&&(e=60);var n=t.R.app.stageHeight-e;if(this.height*this.scaleY>n){var i=this.height*this.scaleY/n;this.scaleX=this.scaleY=i}},n.prototype.initApp=function(t){void 0===t&&(t=""),this.init("app/"+t)},n.prototype.initCom=function(t){void 0===t&&(t=""),this.init("components/"+t)},n.prototype.init=function(t){void 0===t&&(t=""),this.registerEvtCreated(),this.skinName="resource/skins/"+t},n.prototype.registerEvtCreated=function(){this.once(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this)},n.prototype.createCompleteEvent=function(t){this.onCreate()},n.prototype.registerProxy=function(){var e=this.listProxy();for(var n in e)t.ServiceBuilder.Instance.registerProxy(e[n],this.handleProxy,this)},n.prototype.registerEvents=function(){var e=this.listNotificationInterests(),n=e.length;if(t.R.router){var i=t.R.router.getObserver();if(n>0)for(var r=new t.Observer(this.handleNotification,this),o=0;n>o;o++)i.registerObserver(e[o],r)}},n.prototype.removeEvents=function(){for(var e=this.listNotificationInterests(),n=e.length,i=t.R.router.getObserver();n--;)i.removeObserver(e[n],this)},n}(t.AComponent);t.View=e,__reflect(e.prototype,"AGame.View")}(AGame||(AGame={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.popType=1,t.nAlphaMask=.5,t.bCanTouchShadowToClose=!0,t.bIsHistoryBack=!0,t}return __extends(n,e),n.prototype.disableTouchShadowToClse=function(){this.bCanTouchShadowToClose=!1},n.prototype.setAlphaMaskBtm=function(t){this.nAlphaMask=t},n.prototype.onDestroy=function(){t.EventManager.removeEventListeners(this),e.prototype.onDestroy.call(this)},n}(AGame.View);t.CView=e,__reflect(e.prototype,"com_main.CView")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.lan=L.getInstance().getObject(),e}return __extends(e,t),e.prototype.$onRemoveFromStage=function(e){void 0===e&&(e=!0),this.lan=null,t.prototype.$onRemoveFromStage.call(this,e)},e}(AGame.AComponent);t.CComponent=e,__reflect(e.prototype,"com_main.CComponent");var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AGame.AButton);t.CCButton=n,__reflect(n.prototype,"com_main.CCButton");var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(AGame.ARadioButton);t.CCRadioButton=i,__reflect(i.prototype,"com_main.CCRadioButton");var r=function(t){function e(){return t.call(this)||this}return __extends(e,t),e}(AGame.AHSlider);t.CCHSlider=r,__reflect(r.prototype,"com_main.CCHSlider");var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(AGame.AImage);t.CImage=o,__reflect(o.prototype,"com_main.CImage");var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.$onRemoveFromStage=function(){var e=this.dataProvider;e&&(e.replaceAll([]),this.dataProvider=null,this.itemRenderer=null),t.prototype.$onRemoveFromStage.call(this)},e}(eui.List);t.CList=s,__reflect(s.prototype,"com_main.CList")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){this.isLife=!0,this.updateTime=0,n.Instance.push(this)}return t.prototype.onCreate=function(){},t.prototype.onDestroy=function(){this.isLife=!1,n.Instance.remove(this)},t.prototype.onEnterFrame=function(t){},t.prototype.onTimer=function(e){var n=t.FRAME_TIME_UPDATE;for(this.updateTime+=e;this.updateTime>=n&&this.isLife;)this.onEnterFrame(n),this.updateTime-=n},t.FRAME_TIME_UPDATE=1/60,t}();t.Animate=e,__reflect(e.prototype,"com_main.Animate");var n=function(){function t(){this.m_pList=[],this.m_pTimeStamp=0}return t.prototype.onEnterFrame=function(t){for(var e=this.m_pList.concat(),n=(t-this.m_pTimeStamp)/1e3,i=0,r=e.length;r>i;i++){var o=e[i];o.isLife&&o.onTimer(n)}return this.m_pTimeStamp=t,!1},t.prototype.push=function(t){var e=0==this.m_pList.length;return this.m_pList.push(t),e&&(this.m_pTimeStamp=egret.getTimer(),egret.startTick(this.onEnterFrame,this)),t},t.prototype.remove=function(t){var e=this.m_pList.indexOf(t);-1!=e&&this.m_pList.splice(e,1),0==this.m_pList.length&&egret.stopTick(this.onEnterFrame,this)},Object.defineProperty(t,"Instance",{get:function(){return null==t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t}();t.AnimateTimer=n,__reflect(n.prototype,"com_main.AnimateTimer")}(com_main||(com_main={}));var AGame;!function(t){var e=function(){function e(){this.m_bIsConnected=!1,this.m_bIsShowClose=!0}return e.getInstance=function(){return e._instance||(e._instance=new e),e._instance},e.prototype.connect=function(t){var n=this,i=io.connect(t);i.on("connect",function(){n.onConnected()}),i.on("disconnect",function(){n.onClose()}),i.on("error",function(){n.onError()}),i.on(""+CMDS.LOGIN,function(t){n.onReceive(CMDS.LOGIN,t)}),i.on(""+CMDS.CREATE_ROOM,function(t){n.onReceive(CMDS.CREATE_ROOM,t)}),i.on(""+CMDS.JOIN_ROOM,function(t){n.onReceive(CMDS.JOIN_ROOM,t)}),i.on(""+CMDS.START_GAME,function(t){n.onReceive(CMDS.START_GAME,t)}),i.on(""+CMDS.OPERATE_LUCKY_NEXT,function(t){n.onReceive(CMDS.OPERATE_LUCKY_NEXT,t)}),i.on(""+CMDS.OPERATE_LUCKY_END,function(t){n.onReceive(CMDS.OPERATE_LUCKY_END,t)}),i.on(""+CMDS.OPERATE_FLY,function(t){n.onReceive(CMDS.OPERATE_FLY,t)}),i.on(""+CMDS.BROADCAST_ROOM_INFO,function(t){n.onReceive(CMDS.BROADCAST_ROOM_INFO,t)}),this.m_pSocket=i,this.m_pHeartbeatTimer=new egret.Timer(1e3*e.TIMER,0),this.m_pHeartbeatTimer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this)},e.prototype.onReceive=function(e,n){var i=t.ServiceBuilder.decode(e,n);console.info("receive",e,i),t.ServiceBuilder.notifyProtoHandler(e,i)},e.prototype.onConnected=function(){console.log("socket onConnected"),this.m_bIsConnected=!0,this.m_bIsShowClose=!0,t.ServiceBuilder.notifyProtoHandler(e.CONNECTED_LOGIN)},e.prototype.close=function(){this.m_bIsConnected&&(this.m_bIsShowClose=!1,this.m_pSocket.close(),this.onClose(!1))},e.prototype.onClose=function(n){void 0===n&&(n=!0),this.m_bIsConnected=!1,this.stopHeartbeat(),t.ServiceBuilder.notifyProtoHandler(e.CONNECTED_CLOSE),this.onClear()},e.prototype.onClear=function(){this.m_pSocket&&(this.m_pSocket=null,e._instance=null)},e.prototype.onError=function(){this.m_bIsConnected=!1},e.prototype.setConnectInfo=function(t,e){this.m_pIp=t,this.m_iPort=e},e.prototype.sendProtocol=function(t,e){console.info("send",t,e),this.sendBytes(t,e.toArrayBuffer())},e.prototype.sendBytes=function(t,e){this.m_pSocket.emit(""+t,e)},e.prototype.isConnected=function(){return this.m_bIsConnected},e.prototype.startHeartbeat=function(){this.onTimer(),this.m_pHeartbeatTimer.start()},e.prototype.stopHeartbeat=function(){this.m_pHeartbeatTimer.stop()},e.prototype.onTimer=function(){},e.CONNECTED_LOGIN=500001,e.CONNECTED_CLOSE=500002,e.TIMER=30,e}();t.CSocket=e,__reflect(e.prototype,"AGame.CSocket")}(AGame||(AGame={}));var AGame;!function(t){var e=function(){function t(){}return t.prototype.register=function(){},t.prototype.execute=function(t){},t.prototype.getView=function(t,e){var n=egret.getDefinitionByName(t),i=new n(e);return i},t}();t.Controller=e,__reflect(e.prototype,"AGame.Controller",["AGame.IController"])}(AGame||(AGame={}));var AGame;!function(t){var e=function(){function e(){this.arrCmdEvents=[]}return e.prototype.register=function(){for(var e=this.arrCmdEvents.length,n=t.R.router.getObserver(),i=new t.Observer(this.execute,this),r=0;e>r;r++)n.registerObserver(this.arrCmdEvents[r],i)},e.prototype.execute=function(t){},e.prototype.unRegister=function(){var e=t.R.router.getObserver();for(var n in this.arrCmdEvents)e.removeObserver(this.arrCmdEvents[n],this)},e.prototype.getView=function(t,e){var n=egret.getDefinitionByName(t),i=new n(e);return i},e}();t.EventHandler=e,__reflect(e.prototype,"AGame.EventHandler",["AGame.IController"])}(AGame||(AGame={}));var com_main;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.ContentGroup&&t.EventManager.addItemRenderAnim(this.ContentGroup)},n.prototype.$onRemoveFromStage=function(){this.ContentGroup&&(t.EventManager.removeEventListeners(this.ContentGroup),this.ContentGroup.removeChildren()),t.EventManager.removeEventListeners(this),this.setSkin(null),e.prototype.$onRemoveFromStage.call(this)},Object.defineProperty(n.prototype,"skinName",{get:function(){return this.$Component[1]},enumerable:!0,configurable:!0}),n}(eui.ItemRenderer);t.ListItemRenderer=e,__reflect(e.prototype,"com_main.ListItemRenderer")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(e,n){var i=t.call(this)||this;return i.notifyMethod=e,i.notifyContext=n,i}return __extends(e,t),e.prototype.addSelf=function(){},e.prototype.loading=function(t,e){},e.prototype.loaded=function(){this.notifyMethod&&this.notifyMethod.call(this.notifyContext)},e.prototype.onDestroy=function(){this.notifyMethod=this.notifyContext=null,this.removeFromParent()},e.prototype.loadError=function(){console.warn("load error"),this.loaded()},e}(t.CView);t.LoadComponent=e,__reflect(e.prototype,"com_main.LoadComponent")}(com_main||(com_main={}));var SceneTypes;!function(t){t[t.START=0]="START",t[t.INDEX=1]="INDEX",t[t.GAME=2]="GAME"}(SceneTypes||(SceneTypes={}));var com_main;!function(t){var e=function(){function e(){}return e.change=function(e,n){var i=this;switch(console.warn("scene-change",e),e){case SceneTypes.START:this.newScene(e,n);break;case SceneTypes.INDEX:t.ResLoad.getInst().loadGroupWithCall(["index"],function(){i.newScene(e,n)},this,"com_main.CompUIBlockRequest");break;case SceneTypes.GAME:var r=["game"];t.ResLoad.getInst().loadGroupWithCall(r,function(){i.newScene(e,n)},this,"com_main.CompUIBlockRequest")}},e.backGameFromIndex=function(){this.curScene.sceneType!=SceneTypes.GAME&&this.curScene.sceneType!=SceneTypes.START&&(this.curScene.onDestroy(),this.curScene.removeFromParent(),this.curScene=this.sceneGame,this.sceneGame.visible=!0)},e.newScene=function(e,n){this.curScene&&this.curScene.onDestroy(),AGame.R.app.mapLevel.removeChildren(),t.UpManager.close();var i=this.getScene(e),r=egret.getDefinitionByName(i),o=new r(n);switch(o.sceneType=e,this.curScene=o,e){case SceneTypes.START:this.sceneStart=o;break;case SceneTypes.INDEX:this.sceneIndex=o;break;case SceneTypes.GAME:this.sceneGame=o}AGame.R.app.mapLevel.addChild(o)},e.getScene=function(t){var e="";switch(t){case SceneTypes.INDEX:e="com_main.SceneIndex";break;case SceneTypes.GAME:e="com_main.SceneGame";break;case SceneTypes.START:e="com_main.SceneStart"}return e},e.stageSizeChanged=function(){this.curScene&&this.curScene.resize()},e}();t.SceneManager=e,__reflect(e.prototype,"com_main.SceneManager")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){}return t.create=function(t,e,n){var i=t.hashCode,r=!0;return this.m_qActions[i]?this.m_qActions[i]&&this.m_qActions[i].isLife&&(this.m_qActions[i].isLife=!1,r=!1):this.m_qActions[i]=new e,this.m_qAttrs[i]=n,r},t.removeAction=function(t){var e=t.hashCode;this.m_qActions[e]&&(this.m_qActions[e].onDestroy(),this.m_qActions[e]=null,this.m_qAttrs[e]=null,delete this.m_qActions[e],delete this.m_qAttrs[e])},t.removeActions=function(){var t=this.m_qActions;for(var e in t)this.removeAction(t[e]);this.m_qActions=[],this.m_qAttrs=[]},t.m_qActions=[],t.m_qAttrs=[],t}();t.ActionManager=e,__reflect(e.prototype,"com_main.ActionManager")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.sceneType=SceneTypes.GAME,e.initApp("scene_game/SceneGame.exml"),e}return __extends(e,t),e.prototype.listNotificationInterests=function(){return[PlayNav.START_GAME]},e.prototype.handleNotification=function(t){var e=t.getName(),n=t.getBody();switch(console.log("SceneGame ",e,n),e){case PlayNav.START_GAME:this.boardWaitBegin.onDestroy(),this.boardWaitBegin=null}},e.prototype.onCreate=function(){this.resize(),GameData.bUiReady=!0},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this)},e.prototype.resize=function(){this.width=AGame.R.app.stageWidth},e}(t.CView);t.SceneGame=e,__reflect(e.prototype,"com_main.SceneGame")}(com_main||(com_main={}));var AGame;!function(t){var e=function(){function t(t,e){this.notify=null,this.context=null,this.setNotifyMethod(t),this.setNotifyContext(e)}return t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.setNotifyMethod=function(t){this.notify=t},t.prototype.getNotifyContext=function(){return this.context},t.prototype.setNotifyContext=function(t){this.context=t},t.prototype.notifyObserver=function(t){this.getNotifyMethod().call(this.getNotifyContext(),t)},t.prototype.compareNotifyContext=function(t){return t===this.context},t}();t.Observer=e,__reflect(e.prototype,"AGame.Observer",["AGame.IObserver"])}(AGame||(AGame={}));var AGame;!function(t){var e=function(){function t(){this.m_pObserverMap={}}return t.prototype.registerObserver=function(t,e){var n=this.m_pObserverMap[t];n?n.push(e):this.m_pObserverMap[t]=[e]},t.prototype.removeObserver=function(t,e){for(var n=this.m_pObserverMap[t],i=n.length;i--;){var r=n[i];if(r.compareNotifyContext(e)){n.splice(i,1);break}}0==n.length&&delete this.m_pObserverMap[t]},t.prototype.notifyObservers=function(t){var e=t.getName(),n=this.m_pObserverMap[e];if(n)for(var i=n.slice(0),r=i.length,o=0;r>o;o++){var s=i[o];s.notifyObserver(t)}},t}();t.HandlerObserver=e,__reflect(e.prototype,"AGame.HandlerObserver",["AGame.IHandlerObserver"]);var n=function(){function n(){if(this.m_pCommandMap=null,n.instance)throw Error(n.SINGLETON_MSG);n.instance=this,this.m_pCommandMap={},this.initializeRouter()}return n.prototype.getObserver=function(){return this.m_pObserver},n.prototype.initializeRouter=function(){this.m_pObserver=new e},n.prototype.executeRouter=function(t){var e=this.m_pCommandMap[t.getName()];if(e){var n=new e;n.execute(t)}},n.prototype.registerRouter=function(e,n){this.m_pCommandMap[e]||this.m_pObserver.registerObserver(e,new t.Observer(this.executeRouter,this)),this.m_pCommandMap[e]=n},n.prototype.hasRouter=function(t){return null!=this.m_pCommandMap[t]},n.prototype.removeRouter=function(t){this.hasRouter(t)&&(this.m_pObserver.removeObserver(t,this),delete this.m_pCommandMap[t])},n.prototype.notifyObservers=function(t){this.m_pObserver.notifyObservers(t)},Object.defineProperty(n,"Instance",{get:function(){return n.instance||(n.instance=new n),n.instance},enumerable:!0,configurable:!0}),n.SINGLETON_MSG="Router singleton already constructed!",n}();t.Router=n,__reflect(n.prototype,"AGame.Router",["AGame.IRouter"])}(AGame||(AGame={}));var AGame;!function(t){var e=function(){function e(){}return e.startup=function(t){this.initialize(),t&&this.m_pApp.registerView(t)},Object.defineProperty(e,"app",{get:function(){return this.m_pApp},enumerable:!0,configurable:!0}),Object.defineProperty(e,"router",{get:function(){return this.m_pRouter},enumerable:!0,configurable:!0}),e.initialize=function(){this.m_pApp||(this.m_pApp=t.App.Instance),this.m_pRouter||(this.m_pRouter=t.Router.Instance)},e.registerRouter=function(t,e){this.m_pRouter.registerRouter(t,e)},e.notifyObserver=function(e,n){var i=new t.Notification(e,n);this.m_pRouter.notifyObservers(i)},e.removeObservers=function(t,e){this.m_pRouter.getObserver().removeObserver(t,e)},e}();t.R=e,__reflect(e.prototype,"AGame.R")}(AGame||(AGame={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function i(i){e.call(n,i,t)}if(RES.hasRes(t)){var r=RES.getRes(t);r?i(r):RES.getResAsync(t,i,this)}else RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var AGame;!function(t){var e=function(){function t(){}return t.get=function(e,n,i,r){void 0===r&&(r="JSON");var o=new t;o.responseType=r,o.send(egret.HttpMethod.GET,e,n,i)},t.post=function(e,n,i,r){void 0===r&&(r="JSON");var o=new t;o.responseType=r,o.send(egret.HttpMethod.POST,e,n,i)},t.prototype.paramsBuilder=function(t){var e=[];if("object"==typeof t){var n;for(n in t)e.push(n+"="+t[n]);return e.join("&")}return"string"==typeof t?t:""},t.prototype.send=function(e,n,i,r){this.returnFunc=n,this.target=i,this.request=new egret.HttpRequest;var o=this.request,s=this.paramsBuilder(r),a=t.serverUrl;e==egret.HttpMethod.POST?o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):a+="?"+s,o.responseType=egret.HttpResponseType.TEXT,o.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),o.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),o.addEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),o.open(a,e),o.send(r)},t.prototype.onGetComplete=function(t){var e=t.currentTarget,n="JSON"==this.responseType?JSON.parse(e.response):e.response;null!=this.returnFunc&&this.returnFunc.call(this.target,n),this.destory()},t.prototype.onGetIOError=function(t){console.log("get error : "+t),this.destory()},t.prototype.onGetProgress=function(t){},t.prototype.destory=function(){var t=this.request;t.removeEventListener(egret.Event.COMPLETE,this.onGetComplete,this),t.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this),t.removeEventListener(egret.ProgressEvent.PROGRESS,this.onGetProgress,this),this.returnFunc=null,this.request=null},t}();t.HttpClient=e,__reflect(e.prototype,"AGame.HttpClient")}(AGame||(AGame={}));var AGame;!function(t){var e=function(){function t(){this.buffer=new egret.ByteArray}return t.prototype.onReacive=function(t){t.position=3,this.protocol=t.readShort(),t.readBytes(this.buffer,0,t.length-5)},t.prototype.onWrite=function(e,n){var i=new egret.ByteArray(n.toArrayBuffer());this.buffer.writeByte(t.HEAD),this.buffer.writeShort(i.length+2),this.buffer.writeShort(e),this.buffer.writeBytes(i)},t.prototype.onClear=function(){this.buffer.clear()},t.HEAD=124,t}();t.Packet=e,__reflect(e.prototype,"AGame.Packet")}(AGame||(AGame={}));var AGame;!function(t){var e=function(){function t(){var t=RES.getRes("game_proto");this.m_pBuilder=dcodeIO.ProtoBuf.loadProto(t)}return t.prototype.getClazz=function(t){return this.m_pBuilder.build(t)},t.prototype.newClazz=function(t,e){var n=this.getClazz(e),i=new n;return i},t.prototype.decode=function(t,e){var n=this.getClazz(t);return n.decode(e)},t}();__reflect(e.prototype,"ProtoBuilder");var n=function(){function n(){this.m_pBuilder=new e,this.m_pObserver=new t.HandlerObserver,this.m_pProtocolMap={},this.m_pViewEvents={}}return n.prototype.registerModel=function(t,e,n,i){void 0===i&&(i=null),i?this.m_pProtocolMap[t]=[e,n,i]:this.m_pProtocolMap[t]=[e,n]},n.prototype.notifyModel=function(e,n){if(this.m_pProtocolMap[e]){var i=this.getProtoModel(e);i&&i.execute&&i.execute(new t.Notification(e,n))}},n.prototype.registerProxy=function(e,n,i){if(n){var r=this.m_pViewEvents[i.hashCode];if(r&&r.indexOf(e)>-1)return;this.m_pObserver.registerObserver(e,new t.Observer(n,i)),r?r.push(e):this.m_pViewEvents[i.hashCode]=[e]}},n.prototype.notifyProxy=function(t){this.m_pObserver.notifyObservers(t)},n.prototype.removeProxy=function(t){var e=this.m_pViewEvents[t.hashCode];if(e){for(var n=0;n<e.length;n++)this.m_pObserver.removeObserver(e[n],t);delete this.m_pViewEvents[t.hashCode]}},n.prototype.getProtoModel=function(t){return this.m_pProtocolMap[t][0]},n.prototype.getProtoByReq=function(t){this.m_pProtocolMap[t];return this.m_pProtocolMap[t][1]},n.prototype.getProtoByResp=function(t){var e=this.m_pProtocolMap[t];return e?2==e.length?e[1]:e[2]:null},n.prototype.newClazz=function(t){return this.m_pBuilder.newClazz(t,this.getProtoByReq(t))},n.prototype.decode=function(t,e){return this.m_pBuilder.decode(this.getProtoByResp(t),e)},n.prototype.decode_name=function(t,e){return this.m_pBuilder.decode(t,e)},Object.defineProperty(n,"Instance",{get:function(){return n._instance||(n._instance=new n),n._instance},enumerable:!0,configurable:!0}),n.addProtoHandler=function(t,e,i,r){void 0===r&&(r=null),n.Instance.registerModel(t,e,i,r)},n.notifyProtoHandler=function(t,e){n.Instance.notifyModel(t-n.REQ_RESP_DIFF,e)},n.registerProxy=function(t,e,i){n.Instance.registerProxy(t,e,i)},n.notifyProxy=function(t){n.Instance.notifyProxy(t)},n.removeProxy=function(t){n.Instance.removeProxy(t)},n.newClazz=function(t){return n.Instance.newClazz(t)},n.decode=function(t,e){return n.Instance.decode(t,e)},n.decode_name=function(t,e){return n.Instance.decode_name(t,e)},n.sendMessage=function(e,i,r,o){n.Instance.registerProxy(e,r,o),t.CSocket.getInstance().sendProtocol(e,i)},n.REQ_RESP_DIFF=0,n}();t.ServiceBuilder=n,__reflect(n.prototype,"AGame.ServiceBuilder")}(AGame||(AGame={}));var com_main;!function(t){var e=function(){function t(){}return t}();t.AppConfig=e,__reflect(e.prototype,"com_main.AppConfig")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function e(){}return e.startup=function(t){AGame.R.startup(t),this.initDataLocal(),this.initializeController(),this.initializeModel()},e.initDataLocal=function(){""==LocalData.getData(GameConst.LocalDataKey.SWITCH_SOUND)&&LocalData.setData(GameConst.LocalDataKey.SWITCH_SOUND,!0)},e.initializeController=function(){(new t.PublicController).register(),(new t.StartController).register(),(new t.IndexController).register(),(new t.PlayController).register()},e.initializeModel=function(){StartModel.register(),RoomModel.register(),PlayModel.register()},e}();t.Bootstrap=e,__reflect(e.prototype,"com_main.Bootstrap")}(com_main||(com_main={}));var AGame;!function(t){var e=function(){function t(){this.m_pGroups=[],this.length=0,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)}return t.prototype.destroy=function(){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this);for(var t,e=0;e<this.m_pGroups.length;e++)t=this.m_pGroups[e],t[0]=null,t[1]=null,t[2]=null;this.m_pGroups.length=0,this.length=0},t.prototype.loadGroup=function(t,e,n,i,r){this.m_pGroups[t]=[e,n,i],RES.loadGroup(t,r)},t.prototype.onResourceLoadComplete=function(t){console.info("资源组加载完成",t.groupName);var e=this.m_pGroups[t.groupName];if(e){var n=e[0],i=e[2];null!=n&&null!=i&&n.call(i,t.groupName),e=null,delete this.m_pGroups[t.groupName]}var r=Object.keys(this.m_pGroups);r.length<=0&&this.destroy()},t.prototype.onResourceLoadError=function(t){this.onResourceLoadComplete(t)},t.prototype.onResourceProgress=function(t){var e=this.m_pGroups[t.groupName];if(e){var n=e[1],i=e[2];null!=n&&null!=i&&n.call(i,t.groupName,t.itemsLoaded,t.itemsTotal)}},t.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},t.prototype.loadGroups=function(t,e,n,i){for(var r,o=0;o<t.length;o++)r=t[o],this.length+=RES.getGroupByName(r[0]).length,this.loadGroup(r[0],e,n,i,r[1])},t}();__reflect(e.prototype,"ResLoader");var n=function(){function t(){}return t.loadGroups=function(t,n,i,r){var o=new e;return o.loadGroups(t,n,i,r),o.length},t}();t.ResUtils=n,__reflect(n.prototype,"AGame.ResUtils")}(AGame||(AGame={}));var CLabel=function(t){function e(){var e=t.call(this)||this;return e.m_iLanIndex=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"alan",{set:function(t){this.m_iLanIndex=t},enumerable:!0,configurable:!0}),e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.m_iLanIndex>0&&(this.text=L.getLanguage(this.m_iLanIndex))},e}(eui.Label);__reflect(CLabel.prototype,"CLabel");var AGame;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.registerView=function(t){this.m_pRoot=t,this.m_pMapLevel=new egret.DisplayObjectContainer,this.m_pMapLevel.name="map",this.m_pRoot.addChild(this.m_pMapLevel),this.m_pMenuLevel=new egret.DisplayObjectContainer,this.m_pMenuLevel.name="menu",this.m_pMenuLevel.height=this.stageHeight,this.m_pRoot.addChild(this.m_pMenuLevel),this.m_pPopupLevel=new egret.DisplayObjectContainer,this.m_pPopupLevel.name="popUp",this.m_pRoot.addChild(this.m_pPopupLevel),this.m_pTopLevel=new egret.DisplayObjectContainer,this.m_pTopLevel.name="top",this.m_pRoot.addChild(this.m_pTopLevel),this.m_pGuideLevel=new egret.DisplayObjectContainer,this.m_pGuideLevel.name="guide",this.m_pRoot.addChild(this.m_pGuideLevel)},Object.defineProperty(e.prototype,"stageWidth",{get:function(){return this.m_pRoot.stage.stageWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stageHeight",{get:function(){return this.m_pRoot.stage.stageHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenWidth",{get:function(){return egret.Capabilities.boundingClientWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"screenHeight",{get:function(){return egret.Capabilities.boundingClientHeight},enumerable:!0,configurable:!0}),e.prototype.screenScale=function(t,e){var n=this.screenHeight/this.screenWidth,i=t/e,r=n/i+.1,o=n/1.5;return r>.95&&1>r&&(r=1>o?r-.1:.95),r>1?1:r},Object.defineProperty(e.prototype,"mapLevel",{get:function(){return this.m_pMapLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"menuLevel",{get:function(){return this.m_pMenuLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popUpLevel",{get:function(){return this.m_pPopupLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLevel",{get:function(){return this.m_pTopLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"guideLevel",{get:function(){return this.m_pGuideLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.m_pRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Instance",{get:function(){return e.instance||(e.instance=new e),e.instance},enumerable:!0,configurable:!0}),e.isNative=egret.Capabilities.runtimeType!=egret.RuntimeType.WEB,e}(egret.HashObject);t.App=e,__reflect(e.prototype,"AGame.App")}(AGame||(AGame={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.rhText=null,t.m_bIsGary=!1,t.isClear=!0,t.m_iLanIndex=0,t.yOld_text_style={},t}return __extends(n,e),Object.defineProperty(n.prototype,"alan",{set:function(t){this.m_iLanIndex=t},enumerable:!0,configurable:!0}),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.commitProperties(),this.updateStyleValue(),null==this.rhText&&(this.rhText=new t.CCRichText(this.ylb_text),this.ylb_text.parent.addChild(this.rhText)),this.rhText.imageScale=.8,this.rhText.textAlign=!0,this.m_iLanIndex>0&&(this.ylb_text.text=L.getLanguage(this.m_iLanIndex))},n.prototype.updateStyleValue=function(){this.m_bIsGary||(this.yOld_text_style.textColor=this.ylb_text.textColor,this.yOld_text_style.strokeColor=this.ylb_text.strokeColor,this.yOld_text_style.stroke=this.ylb_text.stroke,this.yOld_text_style.source=this.yimg_BtnBg.source,this.yOld_text_style.width=this.ylb_text.width)},n.prototype.$onRemoveFromStage=function(){this.yOld_text_style=null,this.sdata=null,egret.Tween.removeTweens(this),e.prototype.$onRemoveFromStage.call(this,this.isClear)},n.prototype.setStyle=function(t){t==n.ST_SRED?this.yimg_BtnBg.source="FCommon_ButtonSRed_png":t==n.ST_BLUE&&(this.yimg_BtnBg.source="FCommon_ButtonBlue_png")},Object.defineProperty(n.prototype,"text",{set:function(t){this.setCoinText(t)},enumerable:!0,configurable:!0}),n.prototype.setCoinText=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var r=null==i?e:"<color=#"+i+">"+e+"</color>",o=null==n?r:"[img]com_coin"+n+"_png[/img]"+r;this.rhText||(this.rhText=new t.CCRichText(this.ylb_text),this.ylb_text.parent.addChild(this.rhText)),this.rhText.text=o},n.prototype.setText=function(t){this.ylb_text.text=t},Object.defineProperty(n.prototype,"disabled",{get:function(){return!this.enabled},set:function(t){this.enabled=!t,this.gray=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"gray",{get:function(){return this.m_bIsGary},set:function(t){if(this.m_bIsGary!=t){var e=this.yOld_text_style.source;this.m_bIsGary=t,t?(e="Common_Btn2_png",this.ylb_text.strokeColor=5263440):(this.ylb_text.strokeColor=this.yOld_text_style.strokeColor,this.ylb_text.stroke=this.yOld_text_style.stroke,this.ylb_text.textColor=this.yOld_text_style.textColor),this.yimg_BtnBg.source=e,this.commitProperties(),this.validateNow()}},enumerable:!0,configurable:!0}),n.prototype.setImages=function(t){this.yimg_BtnBg.source=t},n.prototype.changeCurrentState=function(t){this.currentState!=t&&(this.commitProperties(),this.gray=!1,this.currentState=t,this.updateStyleValue())
},n.ST_SRED=1,n.ST_BLUE=2,n}(t.CComponent);t.ComButton=e,__reflect(e.prototype,"com_main.ComButton")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){}return t.style1="Style1",t.style2="Style2",t}();t.SelectTagStyle=e,__reflect(e.prototype,"com_main.SelectTagStyle");var n=function(){function t(){}return t.up="Up",t.down="Down",t}();t.SelectTagDirection=n,__reflect(n.prototype,"com_main.SelectTagDirection");var i=function(i){function r(t){var r=i.call(this)||this;return r.m_pContentIsShow=!1,r.m_pTempIndex=0,r.m_pSkinName="",r.m_pMaxHeight=305,r.topTextColor=16777215,t&&(r.m_pIsNew=t),r.m_pDirection=n.down,r.m_pStyle=e.style1,r}return __extends(r,i),r.prototype.createChildren=function(){i.prototype.createChildren.call(this),this.addEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTagClick,this)},r.prototype.onDestroy=function(){t.EventManager.removeEventListeners(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTagClick,this),this.m_pClickListener=null,this.m_pClickObj=null,this.m_pSelectListener=null,this.m_pSelectObj=null,this.list_SelecTags&&(this.list_SelecTags.dataProvider=null),this.list_SelecTags=null,this._item=null},r.prototype.$onRemoveFromStage=function(){this.onDestroy(),i.prototype.$onRemoveFromStage.call(this)},r.prototype.createCompleteEvent=function(t){this.removeEventListener(eui.UIEvent.CREATION_COMPLETE,this.createCompleteEvent,this),this.onCreate()},r.prototype.onCreate=function(){this.createItem(),t.EventManager.addEventListener(this.list_SelecTags,eui.ItemTapEvent.ITEM_TAP,this,this.onTagChange),this.selectIndex=this.m_pTempIndex},Object.defineProperty(r.prototype,"isShowContent",{get:function(){return this.m_pContentIsShow},set:function(t){this.m_pContentIsShow=t,this.group_Content.visible=this.m_pContentIsShow;this.m_pContentIsShow?"Cex_ComboDown_png":"Cex_ComboUp_png"},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectIndex",{get:function(){return this.list_SelecTags?this.list_SelecTags.selectedIndex:0},set:function(t){this.list_SelecTags.selectedIndex=t,this.m_pTempIndex=t,this.onTagChange(null)},enumerable:!0,configurable:!0}),r.prototype.setSelectByIndex=function(t){this.selectIndex=t},r.prototype.getElementAt=function(t){return this.list_SelecTags.getElementAt(t)},Object.defineProperty(r.prototype,"selectData",{get:function(){return this.list_SelecTags?this.list_SelecTags.selectedItem:null},enumerable:!0,configurable:!0}),r.prototype.onTagClick=function(t){this.m_pClickObj&&this.m_pClickListener.call(this.m_pClickObj,this),this.isShowContent=!this.m_pContentIsShow,t.stopImmediatePropagation()},Object.defineProperty(r.prototype,"dataSource",{set:function(t){this.refreshDataSource(t),this.selectIndex=0},enumerable:!0,configurable:!0}),r.prototype.refreshDataSource=function(t){this.currentState=this.getState();for(var e=0;e<t.length;e++){var n=t[e];n.hasOwnProperty("value")||(n.value=e),n.sort||(n.sort=0);var i=null;n.sort==ArraySort.LOWER&&(i="FCommon_ArrowDown_png"),n.sort==ArraySort.UPPER&&(i="FCommon_ArrowUp_png"),n._img=i,n._isLine=!0,n._textColor=n._textColor?n._textColor:16777215,e==t.length-1&&(n._isLine=!1)}var r=75+52*t.length;r=Math.min(r,this.m_pMaxHeight),this.group_Content.height=r,this.list_SelecTags.itemRendererSkinName=this.getItemSkinExml(),this.list_SelecTags.dataProvider=new eui.ArrayCollection(t)},r.prototype.copyDict=function(t,e){if(!t)return t;var n=t instanceof Array?[]:{};for(var i in t)"function"!=typeof t[i]&&(e?n[i]="object"==typeof t[i]?this.copyDict(t[i]):t[i]:n[i]=t[i]);return n},r.prototype.onTagChange=function(t){if(this.list_SelecTags.selectedItem&&this._item){var e=this.copyDict(this.list_SelecTags.selectedItem);e._textColor=this.topTextColor,this._item.data=e}this.m_pSelectObj&&this.m_pSelectListener.call(this.m_pSelectObj,this)},r.prototype.addSelectListener=function(t,e){this.m_pSelectObj=t,this.m_pSelectListener=e},r.prototype.addClickListener=function(t,e){this.m_pClickObj=t,this.m_pClickListener=e},Object.defineProperty(r.prototype,"itemRendererSkinName",{set:function(t){this.m_pSkinName=t,this.removeChild(this._item),this.createItem()},enumerable:!0,configurable:!0}),r.prototype.getState=function(){var t=this.m_pStyle+"_"+this.m_pDirection;return t},Object.defineProperty(r.prototype,"style",{set:function(t){this.m_pStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"direction",{set:function(t){this.m_pDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),r.prototype.createItem=function(){this._item=new t.ListItemRenderer,this._item.skinName=this.getItemSkinExml(!1),this._item.verticalCenter=0,this._item.left=15,this.addChild(this._item)},r.prototype.getItemSkinExml=function(t){void 0===t&&(t=!0);var e=this.width-48,n=t?'<e:Image source="FCommon_Split1_png" width="100%" horizontalCenter="0" bottom="0" visible="{data._isLine}"/>':"",i=t?"center":"left",r="<?xml version='1.0' encoding='utf-8'?>\n<e:Skin width=\""+e+'" height="52" xmlns:e="http://ns.egret.com/eui">\n	<e:Group height="100%" width="100%" horizontalCenter="0" verticalCenter="0">\n		<e:Label id="LblTitle" text="{data.title}" textColor="{data._textColor}" size="26" fontFamily="dfh3Font" stroke="2" strokeColor="0x0d223c"/>\n		<e:Image source="{data._img}"/>\n		<e:layout>\n			<e:HorizontalLayout verticalAlign="middle" horizontalAlign="'+i+'"/>\n		</e:layout>\n	</e:Group>\n	'+n+"\n</e:Skin>";return""==this.m_pSkinName?r:this.m_pSkinName},r}(t.CComponent);t.CComboBox=i,__reflect(i.prototype,"com_main.CComboBox")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(e,n,i,r){void 0===n&&(n=!1),void 0===i&&(i=!1);var o=t.call(this,e,n,i)||this;return o.text="",o.text=r,o}return __extends(e,t),e.Link="link",e}(egret.Event);t.RichTextEvent=e,__reflect(e.prototype,"com_main.RichTextEvent");var n;!function(t){t[t.text=0]="text",t[t.image=1]="image"}(n||(n={}));var i=function(t){function e(){var e=t.call(this)||this;return e.m_pTexts=[],e}return __extends(e,t),e.prototype.addToResults=function(t,e,n){n.style?this.m_pTexts.push({text:t,type:e,style:n.style}):this.m_pTexts.push({text:t,type:e})},e.prototype.parseImage=function(t){for(var e=t.text,i=0,r=e.length;r>i;){var o=e.indexOf("[img]",i);if(0>o)this.addToResults(e.substring(i),n.text,t),i=r;else{this.addToResults(e.substring(i,o),n.text,t);var s=e.indexOf("[/img]",o);-1==s?(egret.$error(1038),s=o):this.addToResults(e.substring(o+5,s),n.image,t),i=s+6}}},e.prototype.parser=function(e){this.m_pTexts=[];for(var n=t.prototype.parser.call(this,e),i=0;i<n.length;i++)this.parseImage(n[i]);return this.m_pTexts},e.prototype.dispose=function(){this.m_pTexts.length=0},e}(egret.HtmlTextParser);t.CCRichLabelTextParser=i,__reflect(i.prototype,"com_main.CCRichLabelTextParser");var r=function(t){function r(e){var n=t.call(this)||this;return n.m_pTextParser=new i,n.m_pLineLabel=new eui.Label,n.m_pLabels=[],n.m_pLabelEvents=[],n.m_pLine=0,n.m_pImages={},n.lineWidth=300,n.m_pWidth=0,n.lineSpacing=0,n.size=0,n.strokeColor=0,n.textWidth=0,n.textHeight=0,n.fontFamily="",n.isSubStr=!1,n.isSubEnd=!1,n.limitLines=0,n.imageScale=1,n.tempLabels=[],n.tempImages=[],e&&(n.lineWidth=e),n}return __extends(r,t),Object.defineProperty(r.prototype,"lineNum",{get:function(){return this.numChildren},enumerable:!0,configurable:!0}),r.prototype.genSpaceStr=function(t){for(var e="";t>0;)e+=" ",t-=this.size<10?4:this.size/3.3333;return[e,t]},r.prototype.showElement=function(t){for(var e=[],i=t.length,r=0;i>r;r++){var o=t[r];if(""!=o.text){if(o.type==n.image){var s=new egret.Bitmap(RES.getRes(o.text));s.width=s.width*this.imageScale,s.height=s.height*this.imageScale;var a=this.genSpaceStr(s.width);o.bitmap=s,o.offsetX=a[1],o.text=a[0],e.push(o)}if(this.appendElement(o,i-1==r),this.isSubStr&&this.isSubEnd)return}}},r.prototype.createLineLabel=function(t,e){var n={};n=t.style?{text:e,style:t.style}:{text:e},this.m_pLabels[this.m_pLine]||(this.m_pLabels[this.m_pLine]=[]),this.m_pLabels[this.m_pLine].push(n)},r.prototype.createLineImage=function(t,e,n){this.m_pImages[e]||(this.m_pImages[e]={lineHeight:0,list:[]}),t.x=n,t.line=e,this.m_pImages[e].list.push(t),this.m_pImages[e].lineHeight<t.bitmap.height&&(this.m_pImages[e].lineHeight=t.bitmap.height)},r.prototype.appendElement=function(t,e){for(var i,r=0,o=this.m_pLineLabel.text,s=this.m_pLineLabel.width,a=t.bitmap?t.bitmap.width:0,h=t.text,c=h.split("\n"),l=c.length,p=0;l>p;p++){h=c[p];for(var u=0;u<=h.length;u++){i=h.substring(r,u),this.m_pLineLabel.text=o+i;var m=this.m_pLineLabel.textWidth;if(this.isSubStr&&this.limitLines>0&&t.type==n.image&&(m+=10),m>=this.lineWidth-10&&(this.m_pLineLabel.width>this.lineWidth?(i=h.substring(r,u-1),r=u-1):r=u,this.isSubStr&&(this.limitLines>0?this.m_pLine==this.limitLines-1&&(i=t.type==n.text?i+"...":"...",this.isSubEnd=!0):t.type==n.text&&(i+="...",this.isSubEnd=!0)),this.createLineLabel(t,i),this.m_pLine+=1,o="",this.m_pLineLabel.text="",t.type==n.image)){if(this.m_pLineLabel.width-s>a/1.5)this.createLineImage(t,this.m_pLine-1,s+a);else{if(this.isSubStr)return;this.m_pLineLabel.text=t.text,this.createLineImage(t,this.m_pLine,a),this.createLineLabel(t,o)}return}}l>1&&l-1>p&&(this.createLineLabel(t,i),this.m_pLine+=1,o="",this.m_pLineLabel.text="")}t.type==n.image&&this.createLineImage(t,this.m_pLine,this.m_pLineLabel.width),i=h.substring(r),i&&this.createLineLabel(t,i)},r.prototype._textFlow=function(t){this.m_pImages=[];var e=this.m_pTextParser.parser(t);this.showElement(e),this.displayLables(),egret.callLater(function(){this.displayImages()},this)},r.prototype.adjustVerticalHeight=function(){for(var t=0;t<this.tempLabels.length;t++)var e=this.tempLabels[t];for(var t=0;t<this.tempImages.length;t++){var e=this.tempImages[t];debug("adjustVerticalHeight2 height:%d ,lineH:%d,offsetY:%d,lineIndex:%d",e.imageObj.height,e.lineH,e.offsetY,e.lineIndex)}if(debug("textWidth:%d,textHeight:%d",this.textWidth,this.textHeight),0!=this.tempLabels.length){for(var n=0,t=1;t<this.tempLabels.length;t++){var i=this.tempLabels[t].height,r=this.tempLabels[t-1].height,o=i+r,s=2*this.size;if(!(s>=o)){n+=i;for(var a=[],h=0;h<this.tempImages.length;h++)(this.tempImages[h].lineIndex=t)&&a.push(this.tempImages[h]);this.tempLabels[t].y=this.tempLabels[t].y+(o-s);for(var c=0;c<a.length;t++)a[c].imageObj.y=a[c].imageObj.y+(o-s);a=[]}}n+=this.tempLabels[0].height,n>this.textHeight&&(this.textHeight=n),this.tempLabels=[],this.tempImages=[]}},r.prototype.linkClick=function(t){this.dispatchEvent(new e(e.Link,!0,!1,t.text))},r.prototype.displayLables=function(){for(var t=0,e=this.m_pLabels.length,n=0;e>n&&!(this.limitLines&&n>=this.limitLines);n++){var i=this.createLabel(),r=this.m_pImages[n]?this.m_pImages[n].lineHeight:this.size,o=this.m_pLabels[n];if(o){for(var s=0;s<o.length;s++){var a=o[s];i.appendElement(a),a.style&&a.style.href&&(i.addEventListener(egret.TextEvent.LINK,this.linkClick,this),this.m_pLabelEvents.push({label:i,type:egret.TextEvent.LINK}))}t+=r>this.size?(r-this.size)/2:0,i.y=n*(this.size+this.lineSpacing),this.tempLabels.push(i),this.addChild(i),this.textWidth<i.textWidth&&(this.textWidth=i.textWidth)}}this.textHeight=e*(this.size+this.lineSpacing)+t-this.lineSpacing,this.m_pLabels=[]},r.prototype.displayImages=function(){var t=0;for(var e in this.m_pImages){if(this.limitLines&&Number(e)>=this.limitLines)break;var n=this.m_pImages[e].list,i=this.m_pImages[e].lineHeight;t+=i>this.size?(i-this.size)/2:0;for(var r=0;r<n.length;r++){var o=n[r],s=this.size,a=o.x,h=(s+this.lineSpacing)*o.line;this.getChildByName(o.bitmap.hashCode)||(this.tempImages.push({imageObj:o.bitmap,lineIndex:e,lineH:i,offsetY:t}),this.addChild(o.bitmap),o.bitmap.name=o.bitmap.hashCode),o.bitmap.x=a-o.bitmap.width,o.bitmap.y=h+this.size-o.bitmap.height+t}}this.m_pImages={}},r.prototype.createLabel=function(){var t=new eui.Label;return t.textColor=this.textColor,t.size=this.size,t.bold=this.bold,t.stroke=this.stroke,t.strokeColor=this.strokeColor,t.fontFamily=this.fontFamily,t},r.prototype.setLineLabelStyle=function(){this.m_pLineLabel.size=this.size,this.m_pLineLabel.bold=this.bold,this.m_pLineLabel.stroke=this.stroke,this.m_pLineLabel.strokeColor=this.strokeColor,this.m_pLineLabel.fontFamily=this.fontFamily},r.prototype.setStyle=function(t){this.textColor=t.textColor,this.size=t.size,this.lineSpacing=t.lineSpacing,this.bold=t.bold,this.stroke=t.stroke,this.strokeColor=t.strokeColor,this.fontFamily=t.fontFamily},r.prototype.setText=function(t,e){this.setLineLabelStyle(),this.textWidth=0,this.textHeight=0,this.isSubEnd=!1,this.m_pLabels=[],this.removeLabelEvent(),this.m_pLineLabel.text="",this.removeChildren(),this.m_pLine=0,this.m_pImages={},this._textFlow(t),this.width=e?e:this.lineWidth},r.prototype.removeLabelEvent=function(){var t,e;for(e=0;e<this.m_pLabelEvents.length;e++)t=this.m_pLabelEvents[e],t.label.removeEventListener(t.type,this.linkClick,this);this.m_pLabelEvents.length=0},r.prototype.dispose=function(){this.removeLabelEvent(),this.m_pImages.length=0,this.m_pLabels.length=0,this.m_pTextParser.dispose(),this.m_pTextParser=null},r}(egret.DisplayObjectContainer);t.CCRichLabel=r,__reflect(r.prototype,"com_main.CCRichLabel");var o=function(t){function e(e){var n=t.call(this)||this;return n.m_pIsCenter=!1,n.m_pX=0,n.m_pY=0,n.m_pOldText="",n.horizontalCenter=e.horizontalCenter,n.verticalCenter=e.verticalCenter,n.top=e.top,n.bottom=e.bottom,n.left=e.left,n.right=e.right,n.label=new r(e.width),n.setStyle(e),n.addChild(n.label),e.visible=!1,n}return __extends(e,t),e.prototype.$onRemoveFromStage=function(){this.label.dispose(),this.label=null,this.m_pOldText=null,t.prototype.$onRemoveFromStage.call(this)},e.prototype.setStyle=function(t){this.m_pWidth=t.width,this.m_pHeight=t.height,this.m_pX=t.x,this.m_pY=t.y,this.label.setStyle(t),this.setPosition(t.x,t.y)},Object.defineProperty(e.prototype,"textAlign",{set:function(t){this.m_pIsCenter=t,this.setPosition(this.m_pX,this.m_pY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subText",{set:function(t){this.label.isSubStr=!0,this.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineNum",{get:function(){return this.label.lineNum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{set:function(t){t=this.parseLanRich(t),t=this.parseClickRich(t),this.m_pOldText!=t&&(this.label.setText(t),this.width=this.label.textWidth,this.height=this.label.textHeight,this.setPosition(this.m_pX,this.m_pY),this.m_pOldText=t)},enumerable:!0,configurable:!0}),e.prototype.setText=function(t,e){this.label.lineWidth=e,this.text=t},e.prototype.setLabelLineWidth=function(t){this.label.lineWidth=t},Object.defineProperty(e.prototype,"imageScale",{set:function(t){this.label.imageScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.label.textWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.label.textHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textColor",{set:function(t){this.label.textColor=t},enumerable:!0,configurable:!0}),e.prototype.setWidth=function(t){this.m_pWidth=t},e.prototype.setPosition=function(t,e){if(this.m_pIsCenter){var n=t+this.m_pWidth/2,i=e+this.m_pHeight/2;this.x=n-this.label.textWidth/2,this.y=i-this.label.height/2}else this.x=t,this.y=e},e.prototype.limitHeight=function(t){this.label.limitLines=t},e.prototype.parseLanRich=function(t){var e=new RegExp("(.*)<color=(.*?)>(.*?)</color>(.*)"),n=null;do if(n=e.exec(t)){var i=RegExp.$2;i=-1==i.indexOf("#")?"#"+i.substr(0,6):i.substr(0,7);var r=RegExp.$1+"<font color='"+i+"'>"+RegExp.$3+"</font>"+RegExp.$4;t=r}while(null!=n);return t},e.prototype.parseClickRich=function(t){var e=new RegExp("(.*)<clk=(.*?)>(.*?)</clk>(.*)"),n=null;do if(n=e.exec(t)){var i=RegExp.$2,r=RegExp.$1+"<u><a href='event:"+i+"'>"+RegExp.$3+"</a></u>"+RegExp.$4;t=r}while(null!=n);return t},e}(t.CComponent);t.CCRichText=o,__reflect(o.prototype,"com_main.CCRichText")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isActive=!0,e.skinName=e.getSkinStr(),e}return __extends(e,t),e.prototype.setData=function(t,e){this.lblMessage.textColor=e,Utils.setRichLabel(this.lblMessage,t)},e.prototype.startTween=function(t){this.x=AGame.R.app.stageWidth/2,this.y=t+this.height/2,this.alpha=0,this.verticalCenter=0,this.horizontalCenter=0,this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.m_pAction=egret.Tween.get(this),this.m_pAction.to({alpha:1},300,egret.Ease.backInOut).wait(100).to({y:this.y-e.tweenDist},e.tweenDuration).wait(100).to({scaleY:.5,alpha:0},400,egret.Ease.backOut).call(this.tweenComplete,this)},e.prototype.tweenComplete=function(){this.parent&&this.parent.removeChild(this),this.isActive=!1,this.m_pAction=null,n.clearQueue()},e.prototype.resetTween=function(t,n){void 0===n&&(n=1),egret.Tween.removeTweens(this),this.m_pAction=egret.Tween.get(this),this.y=t,this.alpha=1,this.scaleX=1,this.scaleY=1;var i=e.tweenDist*n,r=e.tweenDuration*n;this.m_pAction=egret.Tween.get(this),this.m_pAction.to({y:this.y-i},r).wait(100).to({scaleY:.4,alpha:0},400).call(this.tweenComplete,this)},e.prototype.stopTween=function(){egret.Tween.removeTweens(this)},e.prototype.getSkinStr=function(){return'<?xml version=\'1.0\' encoding=\'utf-8\'?>\n<e:Skin class="messageTipSkin" width="688" height="62" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing">\n	<e:Image source="FCommon_BoardcastBg_png" verticalCenter="0" horizontalCenter="0" width="100%"/>\n	<e:Label id="lblMessage" text="标签" horizontalCenter="0" verticalCenter="0" size="32" fontFamily="dfh3Font" stroke="1" strokeColor="0x000000"/>\n</e:Skin>'},e.tweenDist=40,e.tweenDuration=1200,e}(eui.Component);t.UIMsg=e,__reflect(e.prototype,"com_main.UIMsg");var n=function(){function t(){}return t.clearQueue=function(){for(var e,n=t.m_pQueue,i=n.length-1;i>=0;i--)e=n[i],e.isActive||n.splice(i,1)},t.needsLayout=function(){this.clearQueue();var e,n=t.m_pQueue;if(n.length>t.MAX_COUNT)for(var i=0;i<n.length-t.MAX_COUNT;i++)e=n[i],e.stopTween(),e.parent.removeChild(e),n.splice(0,1);if(n.length>0)for(var r,i=0;i<n.length-1;i++){var o=(i+1)/n.length;e=n[i],r=t.MSG_START_Y-(n.length-1-i)*e.height+e.height-10,e.resetTween(r,o)}},t.message=function(n,i){var r=new e;r.touchEnabled=!1;var o=i?t.ERR_COLOR:t.INFO_COLOR;r.setData(n,o),t.m_pQueue.push(r),AGame.R.app.topLevel.addChild(r),t.needsLayout(),r.startTween(t.MSG_START_Y)},t.AddMessageInfo=function(e){t.message(e,!1)},t.AddMessageError=function(e){t.message(e,!0)},t.AddMessageError2Tag=function(e){var n=L.getLanguage(e);t.AddMessageError(n)},t.AddMessageInfo2Tag=function(e){var n=L.getLanguage(e);t.AddMessageInfo(n)},t.INFO_COLOR="0xEBFFFF",t.ERR_COLOR="0xFF9B9B",t.MAX_COUNT=4,t.MSG_START_Y=320,t.m_pQueue=[],t}();t.MessageTip=n,__reflect(n.prototype,"com_main.MessageTip")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(t){var n=e.call(this)||this;return n}return __extends(n,e),n.prototype.createChildren=function(){this.currentState="left",t.EventManager.removeEventListeners(this),e.prototype.createChildren.call(this)},Object.defineProperty(n.prototype,"tabBar",{set:function(t){this.y_TabBar=t},enumerable:!0,configurable:!0}),n.prototype.selectTab=function(){this.data=this.y_TabBar.selectedItem,this.setSelectTabPosition()},n.prototype.setSelectTabPosition=function(){this.currentState=0==this.y_TabBar.selectedIndex?"left":this.y_TabBar.selectedIndex==this.y_TabBar.numElements-1?"right":"down",this.y_TabBar.numElements<4&&"right"==this.currentState&&(this.currentState="down"),this.x=15+this.y_TabBar.selectedIndex*this.width},n}(t.ListItemRenderer);t.SelectedTab=e,__reflect(e.prototype,"com_main.SelectedTab")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.fontFamily="dfh3Font",e.size=35,e.textColor=16777215,e.stroke=2,e.strokeColor=420736,e.width=750,e.height=35,e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.textAlign="center",e.verticalAlign="middle",e}return __extends(e,t),e.prototype.setData=function(t){this.text=t},e.prototype.StartTween=function(){var t=this,e=t.y,i=egret.Tween.get(t);i.to({y:e-550},765),i.to({alpha:0,scaleX:1.3,scaleY:1.3},255),i.call(function(){egret.Tween.removeTweens(t),t.parent.removeChild(t),n.removeRunAniMap(t)})},e}(eui.Label);t.UIMsgAnimLabel=e,__reflect(e.prototype,"com_main.UIMsgAnimLabel");var n=function(){function t(){}return t.clearQueue=function(){var t,e=this.m_pQueue;this.m_pTimer&&(this.m_pTimer.stop(),this.m_pTimer.removeEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.m_pTimer=null);for(var n in this.m_pRunAniMap)t=this.m_pRunAniMap[n],egret.Tween.removeTweens(t),t.parent.removeChild(t);this.m_pRunAniMap=null;for(var i=e.length-1;i>=0;i--)t=e[i],egret.Tween.removeTweens(t),t.parent.removeChild(t),e.splice(i,1)},t.AddMessage=function(t){var n=new e;n.setData(t),this.m_pQueue.push(n);var i=AGame.R.app.topLevel,r=AGame.R.app.stageHeight,o=AGame.R.app.stageWidth;n.x=o/2,n.y=r-450,n.visible=!1,i.addChild(n),this.m_pTimer||(this.m_pTimer=new egret.Timer(30,0),this.m_pTimer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this)),this.m_pTimer.running||this.playffect()},t.playffect=function(){0!=this.m_pQueue.length&&this.m_pTimer.start()},t.timerFunc=function(){if(0==this.m_pQueue.length&&this.m_pTimer)return this.m_pTimer.stop(),void(this.m_pTimer=null);var e=(new Date).getTime();if(!(e<this.m_iLastTime+100)){this.m_iLastTime=e;var n=this.m_pQueue.shift();n.visible=!0,t.setRunAniMap(n),n.StartTween()}},t.setRunAniMap=function(t){this.m_pRunAniMap||(this.m_pRunAniMap={}),this.m_pRunAniMap[t.hashCode]=t},t.removeRunAniMap=function(t){this.m_pRunAniMap[t.hashCode]=null,delete this.m_pRunAniMap[t.hashCode]},t.m_pQueue=[],t.m_iLastTime=0,t}();t.UIMsgAnimManager=n,__reflect(n.prototype,"com_main.UIMsgAnimManager")}(com_main||(com_main={}));var UIOrganizeHelperType;!function(t){t[t.ORDER=0]="ORDER",t[t.FILTER=1]="FILTER"}(UIOrganizeHelperType||(UIOrganizeHelperType={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.m_pGroupY=0,t.m_pSort={},t.m_pFilter={},t.m_pListener=null,t.m_pIsOpen=!1,t.m_pIsShowTag=!1,t.m_pIsStageClick=!1,t.parentNode=null,t.m_iColorIndex=0,t.m_pMask=null,t.UIOrganizeColor=[16233815,16771913,1048035,4586873,16759625,1441779,14810953,16681300,5756415],t.initCom("UIOrganizeSkin.exml"),t}return __extends(n,e),n.prototype.onDestroy=function(){for(var t,n=this.grpSortList.numChildren-1,i=n;i>-1;i--)t=this.grpSortList.getChildAt(i),t.$onRemoveFromStage(),t=null;for(var i=0;i<this.grpSearchList.numChildren;i++)t=this.grpSearchList.getChildAt(i),t.$onRemoveFromStage(),t=null;this.m_pSort=null,this.m_pFilter=null,this.m_pObj=null,this.m_pListener=null,this.btnReset&&this.btnReset.removeChild(this),this.btnSearch&&this.btnSearch.removeChild(this),this.m_pMask&&this.m_pMask.parent&&(this.m_pMask.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.clickListener,this),this.m_pMask.parent.removeChild(this.m_pMask)),this.m_pMask=null,e.prototype.onDestroy.call(this),this.parent&&this.parent.removeChild(this),this.removeChildren(),this.parentNode=null,this.m_pSort=null,this.m_pFilter=null,this.m_pListener=null,this.m_pObj=null,this.parent?this.parent.removeChild(this):this.$onRemoveFromStage()},n.prototype.onCreate=function(){e.prototype.onCreate.call(this),t.EventManager.addTouchTapListener(this,this,this.onThisClick),t.EventManager.addTouchTapListener(this.btnReset,this,this.clickReset),t.EventManager.addTouchTapListener(this.btnSearch,this,this.clickRearch)},n.prototype.refreshPanel=function(e){var n=e,i=(this.width,this.height,(this.parentNode?this.parentNode:t.UpManager.CurrentPanel).localToGlobal(this.x,this.y)),r=new egret.Rectangle(i.x,i.y,this.width,this.height);!r.contains(n.stageX,n.stageY)&&this.visible&&(this.m_pIsShowTag?this.onThisClick():this.hidden()),egret.Rectangle.release(r)},n.prototype.clickReset=function(t){this.reset()},n.prototype.reset=function(){for(var t,e,n=0;n<this.grpSortList.numChildren;n++)t=this.grpSortList.getChildAt(n),t.selectIndex=0,e=t.name.replace("order_",""),this.m_pSort[e]=t.selectData.value;for(var n=0;n<this.grpSearchList.numChildren;n++)t=this.grpSearchList.getChildAt(n),t.selectIndex=0,e=t.name.replace("filter_",""),this.m_pFilter[e]=t.selectData.value},n.prototype.clickRearch=function(t){this.hidden()},Object.defineProperty(n.prototype,"Sort",{get:function(){return this.m_pSort},enumerable:!0,configurable:!0}),n.prototype.setSort=function(t){this.m_pSort=t},Object.defineProperty(n.prototype,"Filter",{get:function(){return this.m_pFilter},enumerable:!0,configurable:!0}),n.prototype.setFilter=function(t){this.m_pFilter=t},n.prototype.getCurrentFilter=function(){var t=[],e=[];for(var n in this.m_pSort)t.push(this.m_pSort[n]);for(var n in this.m_pFilter)e.push(this.m_pFilter[n]);return{order:t,filter:e}},n.prototype.getCurrentFilterIndex=function(){for(var t,e,n={},i={},r=0;r<this.grpSortList.numChildren;r++)e=this.grpSortList.getChildAt(r),t=e.name.replace("order_",""),n[t]=e.selectIndex;for(var r=0;r<this.grpSearchList.numChildren;r++)e=this.grpSearchList.getChildAt(r),t=e.name.replace("filter_",""),i[t]=e.selectIndex;return{order:n,filter:i}},n.prototype.setDateIndex=function(t){var e=t.order,n=t.filter;for(var i in n){var r=n[i];this.setSelectIndex(UIOrganizeHelperType.FILTER,i,r)}for(var i in e){var r=e[i];this.setSelectIndex(UIOrganizeHelperType.ORDER,i,r)}},n.prototype.getCurrentFilterData=function(){for(var t,e,n={},i={},r=0;r<this.grpSortList.numChildren;r++)e=this.grpSortList.getChildAt(r),t=e.name.replace("order_",""),n[t]=this.copyDict(e.selectData);for(var r=0;r<this.grpSearchList.numChildren;r++)e=this.grpSearchList.getChildAt(r),t=e.name.replace("filter_",""),i[t]=this.copyDict(e.selectData);return{order:n,filter:i}},n.prototype.setSelectIndex=function(t,e,n){var i,r;t==UIOrganizeHelperType.ORDER?(i=this.grpSortList,r="order_"+e):(i=this.grpSearchList,r="filter_"+e),console.log("group",i,e,n);var o=i.getChildByName(r);o.selectIndex=n},n.prototype.getSelectTagColor=function(){var t=this.UIOrganizeColor[this.m_iColorIndex];return this.m_iColorIndex++,this.m_iColorIndex==this.UIOrganizeColor.length&&(this.m_iColorIndex=0),t},n.prototype.setOrderData=function(e){for(var i,r=Math.ceil(e.length/3),o=0;o<e.length;o++){i=e[o];var s=new t.CComboBox(!0);s.name="order_"+i.key,s.dataSource=i.data,s.selectIndex=i.index,s.addClickListener(this,this.onTagClick),s.addSelectListener(this,this.onTagSelect),s.topTextColor=this.getSelectTagColor(),this.grpSortList.addChild(s);var a=Math.floor(o/n.NUM_LINE_SHOW),h=o-a*n.NUM_LINE_SHOW;s.x=h*(n.GAP+n.SELECTTAG_WIDTH),s.y=a*(n.GAP+n.SELECTTAG_HEIGHT),i.key&&(this.m_pSort[i.key]=s.selectData.value)}this.grpSearchList.height=n.CONTENT_GROUP_LINE_SIZE*r},n.prototype.setFilterData=function(e){for(var i,r=Math.ceil(e.length/n.NUM_LINE_SHOW),o=0;o<e.length;o++){i=e[o];var s=new t.CComboBox(!0);s.name="filter_"+i.key,s.dataSource=i.data,s.selectIndex=i.index,s.addClickListener(this,this.onTagClick),s.addSelectListener(this,this.onTagSelect),s.topTextColor=this.getSelectTagColor(),this.grpSearchList.addChild(s);var a=Math.floor(o/n.NUM_LINE_SHOW),h=o-a*n.NUM_LINE_SHOW;s.x=h*(n.GAP+n.SELECTTAG_WIDTH),s.y=a*(n.GAP+n.SELECTTAG_HEIGHT),i.key&&(this.m_pFilter[i.key]=s.selectData.value)}this.grpSearchList.height=n.CONTENT_GROUP_LINE_SIZE*r},n.prototype.onTagClick=function(t){var e=t.parent;e.numChildren>n.NUM_LINE_SHOW&&e.setChildIndex(t,9999),this.hideAllSelectTags(t.name),this.m_pIsShowTag=!0},n.prototype.onTagSelect=function(t){if(t.name.indexOf("filter_")>-1){var e=t.name.replace("filter_","");this.m_pFilter[e]=t.selectData.value}else{var e=t.name.replace("order_","");this.m_pSort[e]=t.selectData.value}this.m_pIsShowTag=!1},n.prototype.hideAllSelectTags=function(t){void 0===t&&(t="");for(var e=0;e<this.grpSortList.numChildren;e++){var n=this.grpSortList.getChildAt(e);n.name!=t&&(n.isShowContent=!1)}for(var e=0;e<this.grpSearchList.numChildren;e++){var n=this.grpSearchList.getChildAt(e);n.name!=t&&(n.isShowContent=!1)}},n.prototype.NoOrderChildPos=function(){this.grpSearchText.y=this.grpSortText.y,this.grpSortText.visible=!1,this.grpSortList.visible=!1,this.grpSearchList.y=this.grpSortList.y},n.prototype.NoFilterChildPos=function(){this.grpSearchText.visible=!1,this.grpSearchList.visible=!1,this.imgSplit.visible=!1,this.grpButtons.visible=!1},n.prototype.layout=function(){var t=new eui.HorizontalLayout;return t.horizontalAlign="center",t.verticalAlign="middle",t.gap=30,t},n.prototype.onChange=function(){var t=n.PER_GROUP_HEIGHT;this.grpSortText.visible&&(t+=this.grpSortText.height+this.grpSortList.height,this.grpSortList.numChildren<3&&(this.grpSortList.layout=this.layout())),this.grpSearchText.visible&&(t+=this.grpSearchText.height+this.grpSearchList.height,this.grpSearchList.numChildren<3&&(this.grpSearchList.layout=this.layout())),t+=this.grpButtons.visible?this.grpButtons.height+n.PER_GROUP_HEIGHT:n.PER_GROUP_HEIGHT,this.height=t+10,this.grpSortList.visible&&this.setChildIndex(this.grpSortList,this.numChildren)},n.prototype.addSureFilterListener=function(t,e){this.m_pObj=t,this.m_pListener=e},n.prototype.setDatas=function(t){var e=t.order,n=t.filter;e&&e.length>0?this.setOrderData(e):this.NoOrderChildPos(),n&&n.length>0?this.setFilterData(n):this.NoFilterChildPos(),this.onChange()},n.prototype.refreshDatas=function(t){for(var e,n=t.order,i=t.filter,r=0;r<this.grpSortList.numChildren;r++){e=this.grpSortList.getChildAt(r);var o=n[r];e.dataSource=o.data,e.selectIndex=o.index}for(var r=0;r<this.grpSearchList.numChildren;r++){e=this.grpSearchList.getChildAt(r);var s=i[r];e.dataSource=s.data,e.selectIndex=s.index}},n.prototype.onThisClick=function(){this.m_pIsShowTag&&(this.hideAllSelectTags(),this.m_pIsShowTag=!1)},n.prototype.hidden=function(){this.onThisClick(),this.m_pListener&&this.m_pListener.call(this.m_pObj),this.visible=!1,null!=this.m_pMask&&(this.m_pMask.visible=!1)},n.prototype.OpenView=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=!0),this.m_pIsOpen)this.m_pMask.visible=!0;else{var i=t.localToGlobal(0,0);n?(this.x=i.x,this.y=i.y-this.height-20-e):(this.x=i.x-(this.width-t.width),this.y=i.y+t.height+e)}this.m_pIsOpen=!0,this.visible=!0},n.prototype.clickListener=function(t){this.hidden()},n.prototype.addPopUpLayer=function(){},n.prototype.getGuideNode=function(t){var e=null,n=!1,i=0;if(!e)return null;var r=n?this.Sort:this.Filter;if(r[e]==i)return this.btnSearch;var o=n?this.grpSortList:this.grpSearchList,s="filter_"+e,a=o.getChildByName(s);return a.isShowContent?a.getElementAt(i):a},n.prototype.copyDict=function(t,e){if(!t)return t;var n=t instanceof Array?[]:{};for(var i in t)"function"!=typeof t[i]&&(e?n[i]="object"==typeof t[i]?this.copyDict(t[i]):t[i]:n[i]=t[i]);return n},n.BUTTON_GROUP_SIZE=117,n.TEXT_GROUP_SIZE=49,n.CONTENT_GROUP_LINE_SIZE=75,n.PER_GROUP_HEIGHT=11,n.GAP=18,n.NUM_LINE_SHOW=3,n.SELECTTAG_HEIGHT=62,n.SELECTTAG_WIDTH=163,n}(t.CView);t.UIOrganizeHelper=e,__reflect(e.prototype,"com_main.UIOrganizeHelper")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isSuper=!1,t.m_pOnlyClose=!1,t.name=n.NAME,t}return __extends(n,e),n.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),t.EventManager.removeEventListeners(this),t.EventManager.addTouchScaleListener(this.m_pCloseBtn,this,this.onCloseClick),t.EventManager.addTouchScaleListener(this.m_pBackBtn,this,this.onBackClick)},Object.defineProperty(n.prototype,"historyShow",{set:function(t){this.m_pBackBtn.visible=t,this.m_pOnlyClose=!t},enumerable:!0,configurable:!0}),n.prototype.onCloseClick=function(e){this.m_pOnlyClose?this.onBackClick(e):t.UpManager.close(!0,this.isSuper),e.stopImmediatePropagation()
},n.prototype.onBackClick=function(e){this.funcSelect?this.funcSelect.call(this.funcObj):t.UpManager.history(),e.stopImmediatePropagation()},n.prototype.addBackListener=function(t,e){this.funcObj=t,this.funcSelect=e},n.getPopUp=function(t){return t?t.getChildByName(n.NAME):null},n.setTitle=function(t,e,i){void 0===i&&(i=!0);var r=n.getPopUp(t);r&&(r.setTitle(e),r.historyShow=i)},n.prototype.setTitle=function(t){""!=t&&(this.m_pTitleLbl.text=t)},n.NAME="APopUp",n}(t.CComponent);t.APopUp=e,__reflect(e.prototype,"com_main.APopUp")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var n=e.call(this)||this;return n.rhText=null,n.initCom("Pop/InfoDlg.exml"),n.rhText=new t.CCRichText(n.Lbl_Content),n.Lbl_Content.parent.addChild(n.rhText),n}return __extends(n,e),n.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.funcCallBack=null,this.callBackObj=null,this.rhText=null,t.EventManager.removeEventListeners(this.Btn_OK),t.EventManager.removeEventListeners(this.Img_Close),debug("InfoDialog destory")},n.prototype.onCreate=function(){e.prototype.onCreate.call(this),t.EventManager.addTouchScaleListener(this.Btn_OK,this,this.onOkClick),t.EventManager.addTouchScaleListener(this.Img_Close,this,this.onCloseClick),this.onRefresh()},n.prototype.onRefresh=function(t){""!=this.btnIcon},n.prototype.onCloseClick=function(){this.funcCallBack=null,this.callBackObj=null,this.rhText=null,t.UpManager.history(!1)},n.prototype.onOkClick=function(){this.funcCallBack&&this.funcCallBack.call(this.callBackObj),this.onCloseClick()},Object.defineProperty(n.prototype,"title",{set:function(t){this.Lbl_Title.text=t},enumerable:!0,configurable:!0}),n.prototype.setRichText=function(e){this.rhText||(this.rhText=new t.CCRichText(this.Lbl_Content),this.Lbl_Content.parent.addChild(this.rhText)),this.rhText.text=e},n.prototype.setBtnTextAndIcon=function(t,e){void 0===e&&(e=null),this.Btn_OK.setCoinText(t,e)},n.prototype.setBtnOkCallBack=function(t,e){this.funcCallBack=t,this.callBackObj=e},n.prototype.resize=function(){this.height=AGame.R.app.stageHeight},n}(t.CView);t.InfoDialog=e,__reflect(e.prototype,"com_main.InfoDialog")}(com_main||(com_main={}));var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.registerImplementation("eui.IAssetAdapter",new AssetAdapter),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),com_main.ResLoad.getInst().loadGroupWithCall(["start"],this.onResourceLoadComplete,this,"com_main.LoadComponent");var e=new eui.Theme("resource/default.thm.json",this.stage);e.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),this.stage.addEventListener(egret.Event.RESIZE,this.stageResize,this)},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(){this.isResourceLoadEnd=!0,this.createScene(),AGame.HttpClient.serverUrl=RES.getRes("global").urlHttp,AGame.HttpClient.get(function(t){AGame.info("/",t),RES.getRes("global").urlSocket=t.urlSocket,AGame.CSocket.getInstance().connect(t.urlSocket)},this,"")},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&(com_main.Bootstrap.startup(this),AGame.R.notifyObserver(StartNav.ADD_START))},e.prototype.stageResize=function(t){com_main.SceneManager.stageSizeChanged(),com_main.UpManager.stageSizeChanged()},e}(eui.UILayer);__reflect(Main.prototype,"Main");var com_main;!function(t){var e=function(){function t(){}return t.TimeTween={},t.ARR_BLOCK_REQUEST=[],t.SumOperateNotSix=3,t.SumFly=3,t.SumGridsFinshed=46,t.SumGridsPublic=40,t.SumGridsSelf=6,t.ArrGridsOriginal=[0,2,0,0,1,0,0,2,0,0,0,2,0,0,1,0,0,2,0,0,0,2,0,0,1,0,0,2,0,0,0,2,0,0,1,0,0,2,0,0],t}();t.ConfigCollector=e,__reflect(e.prototype,"com_main.ConfigCollector")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){}return t}();t.ConfigCollectorBuilder=e,__reflect(e.prototype,"com_main.ConfigCollectorBuilder")}(com_main||(com_main={}));var ConfigErrMsg=function(){function t(){}return t.getStrErr=function(t){this.ErrorMsgInBoard||this.generateMsg();var e=this.ErrorMsgInBoard[t];return e||(e="未知错误："+t),e},t.generateMsg=function(){var t=[];this.ErrorMsgInBoard=t},t}();__reflect(ConfigErrMsg.prototype,"ConfigErrMsg");var ConfigUIPos=function(){function t(){}return t}();__reflect(ConfigUIPos.prototype,"ConfigUIPos");var com_main;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.register=function(){var t=AGame.R,e=[IndexNav.ADD_INDEX];for(var i in e)t.registerRouter(e[i],n)},n.prototype.execute=function(e){var n=e.getName(),i=e.getBody();switch(console.log("IndexController ",n,i),n){case IndexNav.ADD_INDEX:t.SceneManager.change(SceneTypes.INDEX)}},n}(AGame.Controller);t.IndexController=e,__reflect(e.prototype,"com_main.IndexController")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.register=function(){var t=AGame.R,e=[PlayNav.ADD_PLAY];for(var i in e)t.registerRouter(e[i],n)},n.prototype.execute=function(e){var n=e.getName(),i=e.getBody();switch(AGame.info("PlayController ",n,i),n){case PlayNav.ADD_PLAY:t.SceneManager.change(SceneTypes.GAME)}},n}(AGame.Controller);t.PlayController=e,__reflect(e.prototype,"com_main.PlayController")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.register=function(){var t=AGame.R,e=[PublicNav.ADD_POP_TIP,PublicNav.ADD_TIP_DURATION,PublicNav.ADD_POP_TIP_OFFLINE];for(var i in e)t.registerRouter(e[i],n)},n.prototype.execute=function(e){var n=e.getName(),i=e.getBody();switch(AGame.info("PublicController ",n,i),n){case PublicNav.ADD_POP_TIP:var r=new t.PopTip(i.typePop,i.strLbTitle,i.strTip,i.bOnlySure,i.bHasBtnClose,i.strSourceTitle,i.callSure,i.callContex,i.callCancel);t.UpManager.popSmallView(r);break;case PublicNav.ADD_TIP_DURATION:t.TipDuration.popOne(i.strTip,i.nDuration);break;case PublicNav.ADD_POP_TIP_OFFLINE:var o=new t.PopTipOffline;t.UpManager.popSmallView(o)}},n}(AGame.Controller);t.PublicController=e,__reflect(e.prototype,"com_main.PublicController")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.prototype.register=function(){var t=AGame.R,e=[StartNav.ADD_START,StartNav.ADD_TOP_INVITE,StartNav.ADD_TOP_SHARE,StartNav.ADD_TOP_BLOCK_REQUEST];for(var i in e)t.registerRouter(e[i],n)},n.prototype.execute=function(e){var n=e.getName(),i=e.getBody();switch(AGame.info("StartController ",n,i),n){case StartNav.ADD_START:t.SceneManager.change(SceneTypes.START);break;case StartNav.ADD_TOP_INVITE:break;case StartNav.ADD_TOP_SHARE:new t.CompShare;break;case StartNav.ADD_TOP_BLOCK_REQUEST:t.CompUIBlockRequest.toggleShow(i)}},n}(AGame.Controller);t.StartController=e,__reflect(e.prototype,"com_main.StartController")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.skinName='<?xml version="1.0" encoding="utf-8"?><e:Skin class="CompShare" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" minWidth="903" minHeight="530"><e:Rect width="100%" height="100%" fillColor="0x000000"  fillAlpha="0.4"/></e:Skin>',e.width=AGame.R.app.stageWidth,e.height=AGame.R.app.stageHeight,AGame.R.notifyObserver(StartNav.ADD_TOP_BLOCK_REQUEST,!0),AGame.ResUtils.loadGroups([["pop_share",0]],e.onResourceLoadComplete,function(){},e),AGame.R.app.topLevel.addChild(e),e}return __extends(e,t),e.prototype.onResourceLoadComplete=function(t){if("pop_share"==t){AGame.R.notifyObserver(StartNav.ADD_TOP_BLOCK_REQUEST,!1);var e=new egret.MovieClipDataFactory(RES.getRes("hand_share_json"),RES.getRes("hand_share_png"));this.mcHand=new egret.MovieClip(e.generateMovieClipData("hand_share")),Utils.setProps(this.mcHand,{x:this.width-120}),this.addChild(this.mcHand),this.mcHand.once(egret.Event.COMPLETE,this.remSelf,this),this.mcHand.play(5)}},e.prototype.remSelf=function(){this.mcHand=null,this.parent&&this.parent.removeChild(this)},e}(eui.Component);t.CompShare=e,__reflect(e.prototype,"com_main.CompShare")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.skinName='<?xml version="1.0" encoding="utf-8"?><e:Skin class="CompUIBlockRequest" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" width="720" height="1250"><e:Label id="lbInfo" text="" horizontalCenter="0" verticalCenter="150" bold="true"/></e:Skin>',i.rectShadow=new eui.Rect(AGame.R.app.stageWidth,AGame.R.app.stageHeight),i.rectShadow.fillAlpha=.2,i.rectShadow.fillColor=0,i.addChild(i.rectShadow);var r=new egret.MovieClipDataFactory(RES.getRes("comp_top_load_json"),RES.getRes("comp_top_load_png"));return i.mcRotate=new egret.MovieClip(r.generateMovieClipData("comp_top_load")),i.addChild(i.mcRotate),i.height=AGame.R.app.stageHeight,i}return __extends(e,t),e.prototype.resize=function(){this.width=this.rectShadow.width=AGame.R.app.stageWidth,Utils.setProps(this.mcRotate,{x:AGame.R.app.stageWidth/2+10,y:AGame.R.app.stageHeight/2+80})},e.prototype.addSelf=function(){this.resize(),this.ctrlMc(!0),AGame.R.app.topLevel.addChild(this)},e.prototype.loading=function(t,e){var n=Math.floor(t/e*100);this.setLbInfo("加载资源中 "+n+"% ...")},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.ctrlMc(!1),this.mcRotate=null},e.prototype.ctrlMc=function(t){t?this.mcRotate.gotoAndPlay(0,-1):this.mcRotate.stop()},e.prototype.setLbInfo=function(t){this.lbInfo.text=""+t},e.toggleShow=function(t){this.inst||(this.inst=new e(null,null)),(this.inst.visible||t)&&(t?this.inst.addSelf():(this.inst.ctrlMc(!1),this.inst.parent&&this.inst.parent.removeChild(this.inst)))},e}(t.LoadComponent);t.CompUIBlockRequest=e,__reflect(e.prototype,"com_main.CompUIBlockRequest")}(com_main||(com_main={}));var TypePopTip;!function(t){t[t.SMALL=0]="SMALL",t[t.MIDDLE=1]="MIDDLE"}(TypePopTip||(TypePopTip={}));var com_main;!function(t){var e=function(e){function n(t,n,i,r,o,s,a,h,c,l,p){var u=e.call(this)||this;return u.arrSkinPop=["public/PopTipSizeSmall.exml","public/PopTipSizeMiddle.exml"],u.callSure=a,u.callContex=h,u.callCancel=c,u.bOnlySure=r,u.bHasBtnClose=o,s&&(u.strSourceTitle=s),u.labelBtnLeft=l,u.labelBtnRight=p,u.strTip=i,u.strTitle=n,u.bCanTouchShadowToClose=!1,u.initApp(u.arrSkinPop[t]),u}return __extends(n,e),n.prototype.onCreate=function(){this.resize(),t.EventManager.addTouchScaleListener(this.imgBtnClose,this,this.touchCancel),t.EventManager.addEventListener(this.btnSure,egret.TouchEvent.TOUCH_TAP,this,this.touchSure),t.EventManager.addEventListener(this.btnCancel,egret.TouchEvent.TOUCH_TAP,this,this.touchCancel),this.imgTitle.source=this.strSourceTitle,this.lbTitle.text=this.strTitle,this.lbTip.text=this.strTip,this.bOnlySure&&(this.btnSure.horizontalCenter="0",this.btnCancel.visible=!1),this.bHasBtnClose&&(this.imgBtnClose.visible=!0),this.labelBtnLeft&&(this.btnSure.label=this.labelBtnLeft),this.labelBtnRight&&(this.btnCancel.label=this.labelBtnRight)},n.prototype.resize=function(){t.UpManager.resizeOnStageCenter(this)},n.prototype.touchSure=function(){this.callSure&&this.callSure.call(this.callContex),this.closePop()},n.prototype.touchCancel=function(){this.callCancel&&this.callCancel.call(this.callContex),this.closePop()},n.prototype.closePop=function(){t.UpManager.history()},n}(t.CView);t.PopTip=e,__reflect(e.prototype,"com_main.PopTip")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.bCanTouchShadowToClose=!1,t.initApp("public/PopTipSizeSmall.exml"),t}return __extends(n,e),n.prototype.onCreate=function(){this.resize(),this.lbTip.text="掉线中，即将自动重连···",this.imgBtnClose.visible=this.btnSure.visible=this.btnCancel.visible=!1},n.prototype.onDestroy=function(){this.removeFromParent(),e.prototype.onDestroy.call(this)},n.prototype.resize=function(){t.UpManager.resizeOnStageCenter(this)},n.prototype.sendLogin=function(){},n.prototype.receiveLogin=function(t){AGame.ServiceBuilder.registerProxy(AGame.CSocket.CONNECTED_LOGIN,this.connected,this),AGame.CSocket.getInstance().setConnectInfo(GameConst.IpGame,GameConst.PortGame)},n.prototype.connected=function(t){},n.prototype.touchClose=function(){t.UpManager.close()},n}(t.CView);t.PopTipOffline=e,__reflect(e.prototype,"com_main.PopTipOffline")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.skinName='<?xml version="1.0" encoding="utf-8"?><e:Skin class="TipDuration" xmlns:e="http://ns.egret.com/eui" xmlns:w="http://ns.egret.com/wing" width="464" height="36"><e:Image source="bg_scroll_text_png" /><e:Label id="lbTip" text="提示文字" textColor="0xD3A93C" horizontalCenter="0" verticalCenter="0" size="21" bold="true"/></e:Skin>',t}return __extends(n,e),n.prototype.showTip=function(t,e){this.lbTip.text=t,Utils.setProps(this,{x:(AGame.R.app.stageWidth-this.width)/2,y:AGame.R.app.stageHeight/2*.4}),AGame.R.app.topLevel.addChild(this),egret.Tween.get(this).to({y:this.y-20},500).wait(e).call(this.remSelf,this)},n.prototype.remSelf=function(){egret.Tween.removeTweens(this),this.parent.removeChild(this),t.CachePool.reclaim(this)},n.popOne=function(e,i){void 0===i&&(i=5e3);var r=t.CachePool.produce(n);r.showTip(e,i)},n.keyClass="com_main.TipDuration",n}(eui.Component);t.TipDuration=e,__reflect(e.prototype,"com_main.TipDuration")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.registerEvtCreated(),e}return __extends(e,t),e.prototype.listNotificationInterests=function(){return[]},e.prototype.handleNotification=function(t){var e=t.getName(),n=t.getBody();console.log("BoardGameMenu : ",e,n)},e.prototype.onCreate=function(){this.resize()},e.prototype.resize=function(){this.width=AGame.R.app.stageWidth},e.prototype.onDestroy=function(){this.removeFromParent(),t.prototype.onDestroy.call(this)},e}(t.CView);t.BoardGameMenu=e,__reflect(e.prototype,"com_main.BoardGameMenu")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.registerEvtCreated(),t}return __extends(n,e),n.prototype.listNotificationInterests=function(){return[PlayNav.USER_JOIN,PlayNav.DESK_MOVE_FLY,PlayNav.DESK_SELECT_FLY]},n.prototype.handleNotification=function(t){var e=t.getName(),n=t.getBody();switch(console.log("BoardGrid : ",e,n),e){case PlayNav.USER_JOIN:this.userJoin(n);break;case PlayNav.DESK_MOVE_FLY:break;case PlayNav.DESK_SELECT_FLY:this.touchChildren=n==GameData.userInfoMe.nPos}},n.prototype.onCreate=function(){for(var e=[],n=0;3>n;n++){for(var i=[],r=GameData.userInfoMe.nPos==n,o=0;3>o;o++){var s=this["u"+n+"_"+o];s.visible=!1,r&&t.EventManager.addTouchTapListener(s,this,this.selectedMove),i.push(s)}e.push(i)}this.arrFlyUsers=e,this.initialComp(),this.resize()},n.prototype.resize=function(){},n.prototype.onDestroy=function(){this.removeFromParent(),e.prototype.onDestroy.call(this)},n.prototype.initialComp=function(){var t=GameData.arrUserInfo;for(var e in t)this.userJoin(t[e])},n.prototype.userJoin=function(t){var e=t.nPos,n=this.arrFlyUsers[e];for(var i in n)n[i].visible=!0},n.prototype.selectedMove=function(t){this.touchChildren=!1;var e=this.arrFlyUsers[GameData.userInfoMe.nPos].indexOf(t.target),n=CMDS.OPERATE_FLY,i=AGame.ServiceBuilder.newClazz(n);i.fInd=e,AGame.ServiceBuilder.sendMessage(n,i)},n}(t.CView);t.BoardGrid=e,__reflect(e.prototype,"com_main.BoardGrid")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.registerEvtCreated(),t}return __extends(n,e),n.prototype.listNotificationInterests=function(){return[PlayNav.DESK_TURN_ONE_OPERATE,PlayNav.DESK_SHOW_LUCKY_NUM]},n.prototype.handleNotification=function(t){var e=t.getName(),n=t.getBody();switch(console.log("BoardOperate : ",e,n),e){case PlayNav.DESK_TURN_ONE_OPERATE:this.turnOneOpereate(n);break;case PlayNav.DESK_SHOW_LUCKY_NUM:this.showLucky(n)}},n.prototype.onCreate=function(){t.EventManager.addEventListener(this.btnOperate,egret.TouchEvent.TOUCH_END,this,this.touchBtnOperate),this.resize()},n.prototype.resize=function(){},n.prototype.onDestroy=function(){this.removeFromParent(),e.prototype.onDestroy.call(this)},n.prototype.turnOneOpereate=function(t){var e=t==GameData.userInfoMe.nPos;this.btnOperate.visible=e},n.prototype.showLucky=function(t){Utils.setProps(this.lbValLucky,{text:""+t,visible:!0}),egret.Tween.get(this.lbValLucky).set({rotation:-359}).to({rotation:0},1e3).call(function(){},this)},n.prototype.touchBtnOperate=function(){var t=CMDS.OPERATE_LUCKY_END,e=AGame.ServiceBuilder.newClazz(t);e.nPos=GameData.userInfoMe.nPos,AGame.ServiceBuilder.sendMessage(t,e),this.btnOperate.visible=!1},n}(t.CView);t.BoardOperate=e,__reflect(e.prototype,"com_main.BoardOperate")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.registerEvtCreated(),t}return __extends(n,e),n.prototype.listNotificationInterests=function(){return[]},n.prototype.handleNotification=function(t){var e=t.getName(),n=t.getBody();console.log("BoardWaitBegin : ",e,n)},n.prototype.onCreate=function(){t.EventManager.addTouchFloatListener(this.lbStartGame,this,this.touchStartGame),this.resize()},n.prototype.resize=function(){this.width=AGame.R.app.stageWidth},n.prototype.onDestroy=function(){this.removeFromParent(),e.prototype.onDestroy.call(this)},n.prototype.touchStartGame=function(){var t=CMDS.START_GAME,e=AGame.ServiceBuilder.newClazz(t);e.n="",AGame.ServiceBuilder.sendMessage(t,e,this.receiveStartGame,this)},n.prototype.receiveStartGame=function(t){},n}(t.CView);t.BoardWaitBegin=e,__reflect(e.prototype,"com_main.BoardWaitBegin")}(com_main||(com_main={}));var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.sceneType=SceneTypes.INDEX,t.initApp("scene_index/SceneIndex.exml"),t}return __extends(n,e),n.prototype.onCreate=function(){this.resize(),t.EventManager.addTouchFloatListener(this.lbJoin,this,this.touchJoin),t.EventManager.addTouchFloatListener(this.lbCreate,this,this.touchCreate)},n.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},n.prototype.resize=function(){this.width=AGame.R.app.stageWidth},n.prototype.touchJoin=function(){if(""!=this.lbIdRoom.text){AGame.info("nIdRoom =",this.lbIdRoom.text);var t=CMDS.JOIN_ROOM,e=AGame.ServiceBuilder.newClazz(t);e.nIdRoom=parseInt(this.lbIdRoom.text),AGame.ServiceBuilder.sendMessage(t,e,this.receiveJoin,this)}},n.prototype.receiveJoin=function(t){0==t.getBody().res&&this.toGame()},n.prototype.touchCreate=function(){var t=CMDS.CREATE_ROOM,e=AGame.ServiceBuilder.newClazz(t);e.nSumUser=4,e.skin=AccountInfo.SKIN_USING,AGame.ServiceBuilder.sendMessage(t,e,this.receiveCreate,this)},n.prototype.receiveCreate=function(t){0==t.getBody().res&&this.toGame()},n.prototype.toGame=function(){t.SceneManager.change(SceneTypes.GAME)},n}(t.CView);t.SceneIndex=e,__reflect(e.prototype,"com_main.SceneIndex")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){var t=e.call(this)||this;return t.isResourceLoadEnd=!1,t.isLogined=!1,t.initApp("scene_start/SceneStart.exml"),t}return __extends(n,e),n.prototype.onCreate=function(){this.resize(),t.EventManager.addTouchScaleListener(this.imgBtnTouristLogin,this,this.touchLogin),this.modifyUserId(LocalData.getData("USER_ID")),Utils.setProps(this.imgBtnWxLogin,{touchEnabled:!1,alpha:.7}),RES.loadGroup("index"),this.drawGrids(4,9),console.warn(4)},n.prototype.drawGrids=function(t,e){for(var n=t*e,i=360/n,r=0;n>r;r++){var o=new eui.Image("g1_"+(r%t+1));o.anchorOffsetX=320,o.anchorOffsetY=16,o.x=this.stage.stageWidth/2,o.y=this.stage.stageHeight/2,o.rotation=r*i+0,this.addChild(o)}for(var s=360/t,a=0;t>a;a++){var h=new egret.Shape;h.graphics.lineStyle(6,11184810),h.x=this.stage.stageWidth/2,h.y=this.stage.stageHeight/2,h.graphics.moveTo(0,0),h.graphics.lineTo(this.stage.stageWidth/2,0),h.rotation=90+a*s,this.addChild(h)}},n.prototype.resize=function(){this.width=AGame.R.app.stageWidth,Utils.setProps(this.imgBanner,{x:this.width/2},[.5,.5]),Utils.setProps(this.imgBtnTouristLogin,{x:this.width/2},[.5,.5]),Utils.setProps(this.imgBtnWxLogin,{x:this.width/2},[.5,.5])},n.prototype.touchLogin=function(){this.modifyUserId(this.inpUserId.text),this.sendLogin()},n.prototype.sendLogin=function(){var t=Number(CMDS.LOGIN),e=AGame.ServiceBuilder.newClazz(t);e.uId=AccountInfo.USER_ID,e.nick=AccountInfo.NICK,e.photo="",e.psw="",AGame.ServiceBuilder.sendMessage(t,e,this.receiveLogin,this)},n.prototype.receiveLogin=function(t){LocalData.setData(GameConst.LocalDataKey.USER_ID,this.inpUserId.text),AGame.R.notifyObserver(StartNav.ADD_TOP_BLOCK_REQUEST,!1),AGame.R.notifyObserver(IndexNav.ADD_INDEX)},n.prototype.modifyUserId=function(t){var e="";if(""==t)for(var n=0;6>n;n++)e+=Math.ceil(9*Math.random());else e=t;AccountInfo.USER_ID=this.inpUserId.text=e,AccountInfo.NICK="游客"+e},n}(t.CView);t.SceneStart=e,__reflect(e.prototype,"com_main.SceneStart")}(com_main||(com_main={}));var AccountInfo=function(){function t(){}return t.USER_ID="",t.NICK="游客",t.SUM_COIN=1e3,t.SUM_ROOM_CARD=10,t.PHOTO_SOURCE="bg_head2_png",t.SKIN_USING=0,t.ARR_SKIN=[0],t}();__reflect(AccountInfo.prototype,"AccountInfo");var EffectData=function(){function t(){}return t.initConfig=function(){this.m_pEffConfig={}},t.createCfgItem=function(t,e,n){void 0===t&&(t=3),void 0===e&&(e=1),void 0===n&&(n=!1);var i={};return i.fHold=t,i.fType=FrameAnimNumType.num,i.isRepeat=n,i.fileNum=e,i},t.loadConfig=function(t){return this.m_pEffConfig[t]},t}();__reflect(EffectData.prototype,"EffectData");var FlyInfo=function(){function t(){this.nIndGridLocal=-1,this.nIndGridGlobal=-1,this.typeGridTo=null}return t}();__reflect(FlyInfo.prototype,"FlyInfo");var GameConst=function(){function t(){}return t.PLATFORM="h5",t.TOKEN_FROM_PLATFORM="",t.CLIENT_FROM="3",t.VERSION_GAME="2016120701",t.STR_MD5_SUFFIX="dzpk_test",t.IpRequestGame="10.17.173.41",t.PortRequestGame=32100,t.is_choose_server=!1,t.HeartbeatTime=3e4,t.LocalDataKey={USER_ID:"USER_ID",SWITCH_SOUND:"SWITCH_SOUND"},t}();__reflect(GameConst.prototype,"GameConst");var GameData=function(){function t(){}return t.nIdRoom=null,t.nIndOperating=-1,t.bUiReady=!1,t}();__reflect(GameData.prototype,"GameData");var UserInfo=function(){function t(t,e,n,i,r){this.bOnline=!0,this.uId=t,this.nick=e,this.photo=n,this.nPos=i,this.skin=r,this.arrFly=[];for(var o,s=0;3>s;s++)o=new FlyInfo,this.arrFly.push(o)}return t.prototype.onOffLine=function(){},t}();__reflect(UserInfo.prototype,"UserInfo");var CMDS;!function(t){t[t.LOGIN=1]="LOGIN",t[t.CREATE_ROOM=2]="CREATE_ROOM",t[t.JOIN_ROOM=3]="JOIN_ROOM",t[t.START_GAME=4]="START_GAME",t[t.OPERATE_LUCKY_NEXT=5]="OPERATE_LUCKY_NEXT",t[t.OPERATE_LUCKY_END=6]="OPERATE_LUCKY_END",t[t.OPERATE_FLY=7]="OPERATE_FLY",t[t.RESULT_GAME=8]="RESULT_GAME",t[t.BROADCAST_OPERATE_INFO=100]="BROADCAST_OPERATE_INFO",t[t.BROADCAST_ROOM_INFO=101]="BROADCAST_ROOM_INFO"}(CMDS||(CMDS={}));var Direction;!function(t){t[t.Right=0]="Right",t[t.Left=1]="Left",t[t.Up=2]="Up",t[t.Down=3]="Down"}(Direction||(Direction={}));var SoundEnum;!function(t){}(SoundEnum||(SoundEnum={}));var ErrorMsg;!function(t){t[t.InvalidVersion=999]="InvalidVersion"}(ErrorMsg||(ErrorMsg={}));var ProtoEnum;!function(t){t[t.LOGIN=1]="LOGIN",t[t.HELLO=1e4]="HELLO",t[t.GM=10001]="GM"}(ProtoEnum||(ProtoEnum={}));var StartNav;!function(t){t[t.ADD_START=101]="ADD_START",t[t.ADD_TOP_INVITE=102]="ADD_TOP_INVITE",t[t.ADD_TOP_SHARE=103]="ADD_TOP_SHARE",t[t.ADD_TOP_BLOCK_REQUEST=105]="ADD_TOP_BLOCK_REQUEST"}(StartNav||(StartNav={}));var PublicNav;!function(t){t[t.ADD_POP_TIP=201]="ADD_POP_TIP",t[t.ADD_TIP_DURATION=202]="ADD_TIP_DURATION",t[t.ADD_POP_TIP_OFFLINE=203]="ADD_POP_TIP_OFFLINE"}(PublicNav||(PublicNav={}));var IndexNav;!function(t){t[t.ADD_INDEX=201]="ADD_INDEX"}(IndexNav||(IndexNav={}));var PlayNav;!function(t){t[t.ADD_PLAY=301]="ADD_PLAY",t[t.USER_JOIN=302]="USER_JOIN",t[t.USER_OFFLINE=303]="USER_OFFLINE",t[t.DESK_TURN_ONE_OPERATE=304]="DESK_TURN_ONE_OPERATE",t[t.DESK_TURN_ME_OPERATE=305]="DESK_TURN_ME_OPERATE",t[t.DESK_MOVE_FLY=306]="DESK_MOVE_FLY",t[t.DESK_SELECT_FLY=308]="DESK_SELECT_FLY",t[t.DESK_SHOW_LUCKY_NUM=309]="DESK_SHOW_LUCKY_NUM",t[t.START_GAME=307]="START_GAME"}(PlayNav||(PlayNav={}));var SoundNav;!function(t){t[t.PLAY=701]="PLAY",t[t.STOP=702]="STOP"}(SoundNav||(SoundNav={}));var SceneManager=com_main.SceneManager,PlayModel=function(){function t(){}return t.register=function(){AGame.ServiceBuilder.addProtoHandler(CMDS.START_GAME,t,"StartGameReq","StartGameResp"),AGame.ServiceBuilder.addProtoHandler(CMDS.OPERATE_LUCKY_NEXT,t,null,"OperateLuckyNextResp"),AGame.ServiceBuilder.addProtoHandler(CMDS.OPERATE_LUCKY_END,t,"OperateLuckyEndReq","OperateLuckyEndResp"),AGame.ServiceBuilder.addProtoHandler(CMDS.OPERATE_FLY,t,"OperateFlyReq","OperateFlyResp")},t.execute=function(t){var e=this,n=Number(t.getName()),i=t.getBody();void 0!=i.res&&0!=i.res;switch(AGame.info(n,i),n){case CMDS.START_GAME:break;case CMDS.OPERATE_LUCKY_NEXT:GameData.nIndOperating=i.nPos,GameData.userInfoMe.nPos==i.nPos&&egret.setTimeout(function(){var t=CMDS.OPERATE_LUCKY_END,n=AGame.ServiceBuilder.newClazz(t);n.nPos=i.nPos,AGame.ServiceBuilder.sendMessage(t,n,function(){},e)},this,1e3);break;case CMDS.OPERATE_LUCKY_END:GameData.userInfoMe.nPos!=i.nPos||!this.bFlying&&6!=i.n||(this.bFlying=!0,egret.setTimeout(function(){var t=CMDS.OPERATE_FLY,n=AGame.ServiceBuilder.newClazz(t);n.fInd=0,AGame.ServiceBuilder.sendMessage(t,n,function(){},e)},this,1e3));break;case CMDS.OPERATE_FLY:}AGame.ServiceBuilder.notifyProxy(t)},t.bFlying=!1,t}();__reflect(PlayModel.prototype,"PlayModel");var RoomModel=function(){function t(){}return t.register=function(){AGame.ServiceBuilder.addProtoHandler(CMDS.CREATE_ROOM,t,"CreateRoomReq","CreateRoomResp"),AGame.ServiceBuilder.addProtoHandler(CMDS.JOIN_ROOM,t,"JoinRoomReq","JoinRoomResp"),AGame.ServiceBuilder.addProtoHandler(CMDS.BROADCAST_ROOM_INFO,t,null,"BroadcastRoomInfo")},t.execute=function(t){var e=t.getName(),n=t.getBody();AGame.info("RoomModel : ",e);var i=void 0!=n.res&&0!=n.res;switch(e){case CMDS.CREATE_ROOM:if(i)break;GameData.nIdRoom=n.nIdRoom,GameData.nSumUser=n.nSumUser,GameData.userInfoMe=GameData.userInfoHostRoom=new UserInfo(AccountInfo.USER_ID,AccountInfo.NICK,AccountInfo.PHOTO_SOURCE,0,AccountInfo.SKIN_USING),GameData.arrUserInfo=[GameData.userInfoHostRoom];break;case CMDS.JOIN_ROOM:if(i)break;GameData.nIdRoom=n.nIdRoom,GameData.nSumUser=n.nSumUser,GameData.arrUserInfo=[];for(var r=0;r<n.users.length;r++){var o=n.users[r];if(o){var s=new UserInfo(o.uId,o.nick,o.photo,o.nPos,o.skin);GameData.arrUserInfo[o.nPos]=s,o.uId==n.uIdHost?GameData.userInfoHostRoom=s:o.uId==AccountInfo.USER_ID&&(GameData.userInfoMe=s)}}break;case CMDS.BROADCAST_ROOM_INFO:switch(n.operate){case 1:var s=new UserInfo(n.uId,n.nick,n.photo,n.nPos,n.skin);GameData.arrUserInfo[n.nPos]=s,GameData.bUiReady&&AGame.R.notifyObserver(PlayNav.USER_JOIN,s);break;case 2:break;case 3:}}AGame.ServiceBuilder.notifyProxy(t)},t}();__reflect(RoomModel.prototype,"RoomModel");var CSocket=AGame.CSocket,StartModel=function(){function t(){}return t.register=function(){AGame.ServiceBuilder.addProtoHandler(CSocket.CONNECTED_LOGIN,t,null),AGame.ServiceBuilder.addProtoHandler(CSocket.CONNECTED_CLOSE,t,null),AGame.ServiceBuilder.addProtoHandler(CMDS.LOGIN,t,"LoginReq","LoginResp")},t.execute=function(t){var e=t.getName(),n=t.getBody();switch(console.log("StartModel : ",e,n),e){case CSocket.CONNECTED_LOGIN:break;case CSocket.CONNECTED_CLOSE:com_main.UpManager.close(),AGame.R.notifyObserver(PublicNav.ADD_POP_TIP_OFFLINE);break;case CMDS.LOGIN:}AGame.ServiceBuilder.notifyProxy(t)},t}();__reflect(StartModel.prototype,"StartModel");var com_main;!function(t){var e=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t}();t.GuideManager=e,__reflect(e.prototype,"com_main.GuideManager")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){}return t}();t.MenuManager=e,__reflect(e.prototype,"com_main.MenuManager")}(com_main||(com_main={}));var NativeHelper=function(){function t(){}return t.destroyNativeSplash=function(){egret.ExternalInterface.call("destroySplash","")},t.isNative=function(){return egret.RuntimeType.NATIVE==egret.Capabilities.runtimeType?!0:!1},t.forceShowLoadingMsg=!1,t}();__reflect(NativeHelper.prototype,"NativeHelper");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,i){function r(t){e.call(i,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var com_main;!function(t){var e=function(){function t(){}return t}();t.TopManager=e,__reflect(e.prototype,"com_main.TopManager")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function e(){}return Object.defineProperty(e,"CurrentPanel",{get:function(){return this.m_pCurrentPanal},enumerable:!0,configurable:!0}),Object.defineProperty(e,"panelSize",{get:function(){return this.m_pPanels.length},enumerable:!0,configurable:!0}),e.stageSizeChanged=function(){this.m_pCurrentPanal&&this.m_pCurrentPanal.resize();for(var t in this.m_pPanels)this.m_pPanels[t].resize();this.m_pMask&&(this.m_pMask.width=AGame.R.app.stageWidth)},e.popView=function(e,n,i,r){void 0===i&&(i=this.STYLE_UP),void 0===r&&(r=!1),this.addPanel(!1,r),this.m_pCurrentPanal=e,AGame.R.app.popUpLevel.addChild(e),n&&t.APopUp.setTitle(e,n),this.m_pCurrentPanal.popType=i,this.resize(),this.mask(),0==this.panelSize&&this.popUpShow(this.m_pCurrentPanal)},e.popSmallView=function(e,n,i,r){this.addPanel(i,!0),this.m_pCurrentPanal=e,AGame.R.app.popUpLevel.addChild(e),t.APopUp.setTitle(e,n,!1),r?(e.anchorOffsetX=e.width*r.anchorX,e.anchorOffsetY=e.height*r.anchorY,e.x=r.x,e.y=r.y):this.setPanelCenter(e),this.m_pCurrentPanal.validateNow(),this.mask(!0)},e.close=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var n=this,i=function(){n.removePanel(n.m_pCurrentPanal,e),n.m_pCurrentPanal=null;for(var t=!1,i=0;i<n.m_pPanels.length;i++){var r=n.m_pPanels[i];e||r.popType!=n.STYLE_MAIN_FULL||(n.m_pCurrentPanal=r,n.m_pCurrentPanal.touchEnabled=!0,n.m_pCurrentPanal.onRefresh(),t=!0),n.removePanel(r)}n.m_pPanels=[],n.mask(!1),t};this.twClose(this.CurrentPanel,i)},e.history=function(t){void 0===t&&(t=!0);var e=this,n=function(){e.removePanel(e.m_pCurrentPanal,!0),e.mask(!1),e.m_pCurrentPanal=null,e.m_pPanels.length>0&&(e.m_pCurrentPanal=e.m_pPanels.pop()),e.m_pCurrentPanal&&(e.m_pCurrentPanal.visible=!0,e.m_pCurrentPanal.touchEnabled=!0,e.m_pCurrentPanal.onRefresh(),e.mask())};this.twClose(this.m_pCurrentPanal,n)},e.addPanel=function(t,e){void 0===e&&(e=!1),t?this.close():this.m_pCurrentPanal&&(this.m_pCurrentPanal.popType!=this.STYLE_MAIN_FULL&&(this.m_pCurrentPanal.visible=e),this.m_pCurrentPanal.touchEnabled=!1,this.m_pPanels.push(this.m_pCurrentPanal))
},e.removePanel=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!1),t||(t=this.m_pCurrentPanal),t&&(e?(t.onDestroy(),t.parent&&(t.parent.removeChild(t),t=null)):t.popType!=this.STYLE_MAIN_FULL&&(t.onDestroy(),t.parent&&(t.parent.removeChild(t),t=null)))},e.twClose=function(t,e){if(t){var n=t.twRemFromStage;switch(n){case null:e&&e();break;case WayTw.SCALE_BOUNCE_FADE_OUT:LibTw.inst.twBounceFadeOut(t,e);break;case WayTw.TO_TOP:LibTw.inst.twToStageTop(t,300,!1,e);break;case WayTw.TO_RIGHT:LibTw.inst.twToStageRight(t,300,!1,e);break;case WayTw.TO_BOTTOM:LibTw.inst.twToStageBtm(t,300,!1,e);break;case WayTw.TO_LEFT:LibTw.inst.twToStageLeft(t,300,!1,e)}}else e&&e()},e.popUpShow=function(t,e){var n=egret.Tween.get(t);t.alpha=.01,n.to({alpha:1},150),e&&n.call(function(){e()})},e.resize=function(t){if(void 0===t&&(t=this.m_pCurrentPanal),t){t.resize();var e=AGame.R.app,n=e.screenScale(AGame.R.app.stageHeight,AGame.R.app.stageWidth);t.popType==this.STYLE_UP&&(t.scaleX=n,t.scaleY=n),this.setPanelCenter(t)}},e.setPanelCenter=function(t){void 0===t&&(t=this.m_pCurrentPanal),t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x=AGame.R.app.stageWidth/2,t.y=AGame.R.app.stageHeight/2},e.resizeOnStageCenter=function(t,e){void 0===e&&(e=60),this.resizeOverWidth(t)},e.resizeOverWidth=function(t,e){void 0===e&&(e=60);var n=AGame.R.app.stageWidth-e,i=t.width>n?n/t.width:1;t.scaleX=t.scaleY=i,t.x=(AGame.R.app.stageWidth-t.width*i)/2+t.anchorOffsetX*i,t.y=(AGame.R.app.stageHeight-t.height*i)/2+t.anchorOffsetY*i},e.mask=function(t){void 0===t&&(t=!0);var e=AGame.R.app.popUpLevel;this.m_pMask||(this.m_pMask=new eui.Rect(AGame.R.app.stageWidth,AGame.R.app.stageHeight,0),e.addChild(this.m_pMask),this.m_pMask.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMaskClickListener,this)),this.m_pMask.alpha=this.m_pCurrentPanal?this.m_pCurrentPanal.nAlphaMask:0;var n=e.numChildren-2>0?e.numChildren-2:0;e.setChildIndex(this.m_pMask,n),this.m_pMask.visible=t},e.stageResize=function(){this.m_pCurrentPanal&&this.setPanelCenter(this.m_pCurrentPanal)},e.onMaskClickListener=function(){this.CurrentPanel.bCanTouchShadowToClose&&(this.CurrentPanel.bIsHistoryBack?this.history():this.close())},e.m_pPanels=[],e.m_pCurrentPanal=null,e.STYLE_UP=1,e.STYLE_FULL=2,e.STYLE_MAIN_FULL=3,e}();t.UpManager=e,__reflect(e.prototype,"com_main.UpManager")}(com_main||(com_main={}));var AGame;!function(t){function e(e,n){if(t.logLevel!=c.None&&!(e>t.logLevel)){var i="["+l[e]+"]";if(n.unshift(i),"web"==egret.Capabilities.runtimeType)switch(e){case c.Error:console.error.apply(console,n);break;case c.Warn:console.warn.apply(console,n);break;case c.Info:console.info.apply(console,n);break;case c.Debug:console.log.apply(console,n);break;case c.Trace:default:console.debug.apply(console,n)}else{n.map(function(t,e,n){if("object"==typeof t)try{n[e]=JSON.stringify(t)}catch(i){egret.error(i)}});var r=n.join(" -> ");switch(e){case c.Error:egret.error(r);break;case c.Warn:egret.warn(r);break;case c.Info:case c.Debug:case c.Trace:default:egret.log(r)}}}}function n(){return t.logLevel>=c.Debug}function i(){return t.logLevel>=c.Trace}function r(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e(c.Error,t)}function o(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e(c.Warn,t)}function s(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e(c.Info,t)}function a(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e(c.Debug,t)}function h(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e(c.Trace,t)}var c;!function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Info=3]="Info",t[t.Debug=4]="Debug",t[t.Trace=5]="Trace",t[t.All=6]="All"}(c=t.LogLevel||(t.LogLevel={}));var l=["","Error","Warn","Info","Debug","Trace"];t.logLevel=c.Info,t.isDebugEnabled=n,t.isTraceEnabled=i,t.error=r,t.warn=o,t.info=s,t.debug=a,t.trace=h}(AGame||(AGame={}));var AGame;!function(t){var e=function(){function t(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null),this.name=null,this.body=null,this.type=null,this.name=t,this.body=e,this.type=n}return t.prototype.getName=function(){return this.name},t.prototype.setBody=function(t){this.body=t},t.prototype.getBody=function(){return this.body},t.prototype.setType=function(t){this.type=t},t.prototype.getType=function(){return this.type},t.prototype.toString=function(){var t="Notification Name: "+this.getName();return t+="\nBody:"+(null==this.getBody()?"null":this.getBody().toString()),t+="\nType:"+(null==this.getType()?"null":this.getType())},t}();t.Notification=e,__reflect(e.prototype,"AGame.Notification",["AGame.INotification"])}(AGame||(AGame={}));var FrameManager=function(){function t(){}return t.getFrame=function(t,e){return this.m_pFramesMap[t]&&this.m_pFramesMap[t].frames[e]?this.m_pFramesMap[t].frames[e]:null},t.numFrames=function(t){var e=0;return this.m_pFramesMap[t]&&(e=Utils.objectLenght(this.m_pFramesMap[t].frames)),e},t.setFrames=function(t,e,n){if(!this.m_pFramesMap[t]){var i={};i.frames={},i.isOver=!1,this.m_pFramesMap[t]=i}for(var r in e)this.m_pFramesMap[t].frames[r]=e[r];this.m_pFramesMap[t].isOver=n},t.isCheck=function(t){return this.m_pFramesMap[t]?this.m_pFramesMap[t].isOver:!1},t.removeFrames=function(t){delete this.m_pFramesMap[t]},t.m_pFramesMap={},t}();__reflect(FrameManager.prototype,"FrameManager");var EImageSprite=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"scale",{set:function(t){this.scaleX=t,this.scaleY=t},enumerable:!0,configurable:!0}),e}(egret.Bitmap);__reflect(EImageSprite.prototype,"EImageSprite");var ImageEffect=function(){function t(){}return t.load=function(e,n,i){var r=new EImageSprite,o=t.loadAni([r],e,n,i);return this.m_pAnimMap[r.hashCode]=o,r.visible=!1,r},t.loadAni=function(t,e,n,i){var r=EffectData.loadConfig(e),o=new com_main.SpriteAnimation(t,e,r.fHold,r.fType);o.isRepeat=r.isRepeat;var s=this.load_Common_files(e,r.fileNum);return o.loadFiles(s,n,i),o},t.removeActions=function(){for(var t in this.m_pAnimMap){var e=this.m_pAnimMap[t];e.removeAction()}this.m_pAnimMap=null,this.m_pAnimMap={}},t.removeAction=function(t,e){if(void 0===e&&(e=!0),t){t.eff_config=null;var n=this.m_pAnimMap[t.hashCode];n&&n.removeAction(e),n=null,delete this.m_pAnimMap[t.hashCode],egret.Tween.removeTweens(t),t.parent&&t.parent.removeChild(t),t=null}},t.runAction=function(t,e,n,i){void 0===i&&(i=!0),t.visible=!0;var r=this.m_pAnimMap[t.hashCode];r.anim&&(t.texture=r.anim.getFrame());var o=function(){t.visible=!1,e&&e.call(n)};r.runAction(o,this,i)},t.stopAction=function(t){t.visible=!0;var e=this.m_pAnimMap[t.hashCode];e?e.stopAction():(egret.Tween.removeTweens(t),t.visible=!1)},t.load_Common_files=function(t,e){var n=t.split("_"),i=[],r="resource/assets/effects/"+n[0]+"/"+t+"/";if(e>1)for(var o=1;e>=o;o++){var s=r+t+"_"+o+".json";i.push(s)}else{var s=r+t+".json";i.push(s)}return i},t.m_pAnimMap={},t}();__reflect(ImageEffect.prototype,"ImageEffect");var FrameType;!function(t){t[t.FT_WAIT=1]="FT_WAIT",t[t.FT_ATTR=2]="FT_ATTR",t[t.FT_CALL=3]="FT_CALL",t[t.FT_SET=4]="FT_SET"}(FrameType||(FrameType={}));var FrameData=function(){function t(t,e){this.attr={},this.millsecond=e,this.frameType=t}return t.prototype.dispose=function(){this.attr=null,this.callback=null,this.target=null},t}();__reflect(FrameData.prototype,"FrameData");var NTweenAction=function(){function t(t,e,n,i){this.m_pFrames=[],this.m_iEndX=0,this.m_iEndY=0,this.m_iStartScaleX=1,this.m_iStartScaleY=1,this.m_iDelay=0,this.m_bIsLoop=!1,this.m_iPreFrame=0,this.m_iStartX=t.x,this.m_iStartY=t.y,this.m_pDisplay=t,this.m_iEndX=e,this.m_iEndY=n,this.m_pDisplay.visible=i}return t.create=function(e,n,i,r){return void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=!1),new t(e,n,i,r)},t.remove=function(t){egret.Tween.removeTweens(t)},t.prototype.clear=function(){for(var t,e=0;e<this.m_pFrames.length;e++)t=this.m_pFrames[e],t.dispose(),t=null;this.m_pFrames.length=0},t.prototype.loop=function(t){return this.m_bIsLoop=t,this},Object.defineProperty(t.prototype,"endX",{set:function(t){this.m_iEndX=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endY",{set:function(t){this.m_iEndY=t},enumerable:!0,configurable:!0}),t.prototype.getOffsetX=function(t){var e=this.m_iStartX-(t-this.m_iEndX)/1.44;return e},t.prototype.getOffsetY=function(t){var e=this.m_iStartY-(t-this.m_iEndY)/1.44;return e},t.prototype.getLastFrame=function(){return this.m_pFrames[this.m_pFrames.length-1]},t.prototype.convertScale=function(t){return t/100},t.prototype.wait=function(t){var e=t-this.m_iPreFrame;return this.m_pFrames.push(new FrameData(FrameType.FT_WAIT,Utils.Frame2Time(e))),this.m_iPreFrame=t,this},t.prototype.next=function(t){var e=t-this.m_iPreFrame;return this.m_pFrames.push(new FrameData(FrameType.FT_ATTR,Utils.Frame2Time(e))),this.m_iPreFrame=t,this},t.prototype.delay=function(t){return this.m_iDelay=Utils.Frame2Time(t),this},t.prototype.set=function(){this.m_pFrames.push(new FrameData(FrameType.FT_SET,0));var t=this.getLastFrame();return t.attr.visible=!0,this},t.prototype.orderTo=function(t,e){var n=this.getLastFrame();return n.attr.x=t,n.attr.y=e,this},t.prototype.orderToX=function(t){var e=this.getLastFrame();return e.attr.x=t,this},t.prototype.orderToY=function(t){var e=this.getLastFrame();return e.attr.y=t,this},t.prototype.offsetTo=function(t,e){var n=this.getLastFrame();return n.attr.x=this.getOffsetX(t),n.attr.y=this.getOffsetY(e),this},t.prototype.offsetToX=function(t){var e=this.getLastFrame();return e.attr.x=this.getOffsetX(t),this},t.prototype.offsetToY=function(t){var e=this.getLastFrame();return e.attr.y=this.getOffsetY(t),this},t.prototype.scaleTo=function(t,e){void 0===e&&(e=-1),-1==e&&(e=t);var n=this.getLastFrame();return n.attr.scaleX=this.convertScale(t),n.attr.scaleY=this.convertScale(e),this},t.prototype.scaleToX=function(t){var e=this.getLastFrame();return e.attr.scaleX=this.convertScale(t),this},t.prototype.scaleToY=function(t){var e=this.getLastFrame();return e.attr.scaleY=this.convertScale(t),this},t.prototype.baseScale=function(t,e){return void 0===e&&(e=-1),-1==e&&(e=t),this.m_iStartScaleX=t/100,this.m_iStartScaleY=e/100,this},t.prototype.base2Scale=function(t,e){void 0===e&&(e=-1),-1==e&&(e=t),t=this.m_iStartScaleX*t,e=this.m_iStartScaleY*e;var n=this.getLastFrame();return n.attr.scaleX=this.convertScale(t),n.attr.scaleY=this.convertScale(e),this},t.prototype.alphaTo=function(t){var e=this.getLastFrame();return e.attr.alpha=t,this},t.prototype.rotateTo=function(t){var e=this.getLastFrame();return e.attr.rotation=t,this},t.prototype.valueTo=function(t){var e=this.getLastFrame();return e.attr.value=t,this},t.prototype.call=function(t,e){var n=new FrameData(FrameType.FT_CALL,0);return n.callback=t,n.target=e,this.m_pFrames.push(n),this},t.prototype.play=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var n=this.m_pFrames.length,i=egret.Tween.get(this.m_pDisplay,{loop:this.m_bIsLoop});this.m_iDelay>0&&i.wait(this.m_iDelay);for(var r=0;n>r;r++){var o=this.m_pFrames[r];switch(o.frameType){case FrameType.FT_WAIT:i.wait(o.millsecond);break;case FrameType.FT_ATTR:i.to(o.attr,o.millsecond);break;case FrameType.FT_SET:i.set(o.attr);break;case FrameType.FT_CALL:i.call(o.callback,o.target)}}t&&i.call(t,e),this.m_iPreFrame=0,this.clear()},t}();__reflect(NTweenAction.prototype,"NTweenAction");var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.isLife=!1,e}return __extends(e,t),e.prototype.onDestroy=function(){this.m_pTarget=null,this.m_pFunFlag=null,t.prototype.onDestroy.call(this)},e.prototype.roll=function(t,e,n,i){this.m_pFrameTime=0,this.m_pTarget=i,this.m_pRollValue=t,this.m_pSpeed=t/e,this.m_pFunFlag=n,this.isLife=!0,this.m_pAllTime=e},e.prototype.onEnterFrame=function(t){this.m_pFrameTime+=t;var e=Utils.number2int(this.m_pSpeed*this.m_pFrameTime);this.m_pFrameTime>=this.m_pAllTime&&(e=this.m_pRollValue,this.isLife=!1),this.m_pFunFlag.call(this.m_pTarget,e,this.m_pTarget)},e}(t.Animate);t.NumberRollAction=e,__reflect(e.prototype,"com_main.NumberRollAction")}(com_main||(com_main={}));var FrameAnimNumType;!function(t){t[t.num=0]="num",t[t.string=1]="string"}(FrameAnimNumType||(FrameAnimNumType={}));var com_main;!function(t){var e=function(){function t(t){this.framesToHold=3,this.frameToCenter="",this.frameNumType=0,this.isFrameFinished=!1,this.m_bIsReverse=!1,this.m_pNextFrameIndex=0,this.m_pFrameIndex=0,this.m_pActionName="",this.m_pNumFrames=0,this.actionName=t}return Object.defineProperty(t.prototype,"AcitonName",{get:function(){return this.m_pActionName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numFrames",{get:function(){return this.m_pNumFrames},set:function(t){this.m_pNumFrames=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReverse",{set:function(t){this.m_bIsReverse=t,this.resetFrameIndex()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"actionName",{set:function(t){this.m_pActionName=t},enumerable:!0,configurable:!0}),t.prototype.nextFrame=function(){++this.m_pNextFrameIndex,this.m_pNextFrameIndex>=this.framesToHold&&(this.m_pNextFrameIndex=0,this.m_bIsReverse?(--this.m_pFrameIndex,this.isFrameFinished=this.m_pFrameIndex<0,this.isFrameFinished&&(this.m_pFrameIndex=this.m_pNumFrames-1)):(++this.m_pFrameIndex,this.isFrameFinished=this.m_pFrameIndex>=this.numFrames,this.isFrameFinished&&(this.m_pFrameIndex=0)))},t.prototype.resetFrameIndex=function(){this.m_bIsReverse?this.m_pFrameIndex=this.m_pNumFrames-1:this.m_pFrameIndex=0},t.prototype.getLastFrame=function(){var t,e=this.m_bIsReverse?0:this.m_pNumFrames-1,n="_png";return t=0==this.frameNumType?this.m_pActionName+"_"+this.frameToCenter+e:this.m_pActionName+"_"+this.num2Zero(e),FrameManager.getFrame(this.m_pActionName,t+n)},t.prototype.getFrame=function(){var t,e="_png";return t=0==this.frameNumType?this.m_pActionName+"_"+this.frameToCenter+this.m_pFrameIndex:this.m_pActionName+"_"+this.num2Zero(this.m_pFrameIndex),FrameManager.getFrame(this.m_pActionName,t+e)},t.prototype.num2Zero=function(t){var e=10>t?"0"+t:""+t;return e},t.prototype.clear=function(){FrameManager.removeFrames(this.m_pActionName)},t.createAnim=function(e,n,i){void 0===e&&(e=3),void 0===i&&(i=0);var r=new t(n);return r.framesToHold=e,r.frameNumType=i,r},t}();t.FrameAnim=e,__reflect(e.prototype,"com_main.FrameAnim");var n=function(t){function n(n,i,r,o){void 0===r&&(r=3),void 0===o&&(o=0);var s=t.call(this)||this;return s.isRepeat=!1,s.m_pLoaded=!1,s.m_pIsStart=!1,s.m_pThisArg=null,s.m_pCallback=null,s.m_pLoaderComplete=null,s.m_pLoaderCompleteThis=null,s.isLife=!1,s.m_pActionBitmaps=n,s.m_pFrameAnim=e.createAnim(r,i,o),s}return __extends(n,t),Object.defineProperty(n.prototype,"sprites",{set:function(t){this.m_pActionBitmaps=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"anim",{get:function(){return this.m_pFrameAnim},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isReverse",{set:function(t){this.m_pFrameAnim.isReverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"framesToHold",{set:function(t){this.m_pFrameAnim.framesToHold=t},enumerable:!0,configurable:!0}),n.prototype.loadFiles=function(t,e,n){if(this.m_pNumComplete=0,this.m_pLoaderNum=t.length,this.m_pLoaderComplete=e,this.m_pLoaderCompleteThis=n,FrameManager.isCheck(this.m_pFrameAnim.AcitonName))this.m_pIsStart&&(this.isLife=!0),this.m_pFrameAnim.numFrames=FrameManager.numFrames(this.m_pFrameAnim.AcitonName),this.m_pLoaderCompleteThis&&this.m_pLoaderComplete.call(this.m_pLoaderCompleteThis);else for(var i=0;i<this.m_pLoaderNum;i++)this.loadFile(t[i],RES.ResourceItem.TYPE_SHEET)},n.prototype.loadFile=function(t,e){RES.getResByUrl(t,this.onFileLoadComplete,this,e)},n.prototype.onFileLoadComplete=function(t){var e=t._textureMap;++this.m_pNumComplete,FrameManager.setFrames(this.m_pFrameAnim.AcitonName,e,this.m_pNumComplete==this.m_pLoaderNum),this.m_pNumComplete==this.m_pLoaderNum&&(this.m_pLoaded=!0,this.m_pIsStart&&(this.isLife=!0),this.m_pFrameAnim.numFrames=FrameManager.numFrames(this.m_pFrameAnim.AcitonName),this.m_pLoaderComplete&&(this.m_pLoaderCompleteThis?this.m_pLoaderComplete.call(this.m_pLoaderCompleteThis,t):this.m_pLoaderComplete(t)))},n.prototype.runAction=function(t,e,n){void 0===n&&(n=!0),this.m_pCallback=t,this.m_pThisArg=e,this.m_pIsStart=!0,FrameManager.isCheck(this.m_pFrameAnim.AcitonName)&&(n&&(this.m_pFrameAnim.isFrameFinished=!1,this.m_pFrameAnim.resetFrameIndex()),this.isLife=!0)},n.prototype.stopAction=function(){this.isLife=!1},n.prototype.removeAction=function(t){void 0===t&&(t=!0),this.stopAction(),this.onDestroy(),t&&this.m_pFrameAnim.clear(),this.m_pActionBitmaps=null,this.m_pThisArg=null,this.m_pCallback=null,this.m_pLoaderComplete=null,this.m_pLoaderCompleteThis=null,this.m_pFrameAnim=null},n.prototype.onEnterFrame=function(t){if(this.m_pFrameAnim.nextFrame(),this.m_pFrameAnim.isFrameFinished&&!this.isRepeat&&(this.stopAction(),this.m_pCallback))return this.m_pCallback.call(this.m_pThisArg),this.m_pCallback=null,void(this.m_pThisArg=null);for(var e=0;e<this.m_pActionBitmaps.length;e++){var n=this.m_pActionBitmaps[e],i=this.m_pFrameAnim.getFrame();n&&(n.texture=i)}},n}(t.Animate);t.SpriteAnimation=n,__reflect(n.prototype,"com_main.SpriteAnimation")}(com_main||(com_main={}));var com_main;!function(t){var e;!function(t){t[t.Scene=0]="Scene",t[t.Ui=1]="Ui",t[t.Battle=2]="Battle"}(e||(e={}));var n=function(){function t(){}return t}();t.TextureManager=n,__reflect(n.prototype,"com_main.TextureManager")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.updateTime=0,r}return __extends(e,t),e.get=function(t,n,i,r){return void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=!1),r&&e.removeTweens(t),new e(t,n,i)},e.TWEENANIM_FRAME_TIME=16,e}(egret.Tween);t.TweenAnim=e,__reflect(e.prototype,"com_main.TweenAnim")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(){return e.call(this)||this}return __extends(n,e),n.DoMoneyValue=function(e,i,r,o,s){var a={target:e,start_value:i,to_value:r,handle_func:s},h=this.create(e,t.NumberRollAction,a),c=e.hashCode,l=n.m_qActions[c];h||(n.m_qActions[c].isLife=!1,n.moneyRoll(0,e)),l.roll(r-i,o,n.moneyRoll,e)},n.moneyRoll=function(t,e){var i=e.hashCode,r=n.m_qActions[i],o=n.m_qAttrs[i];r.isLife?e.text=o.handle_func?o.handle_func(o.start_value+t):o.start_value+t:e.text=o.handle_func?o.handle_func(o.to_value):o.to_value},n.removeAction=function(e){var i=e.hashCode;this.moneyRoll(0,n.m_qAttrs[i].target),t.ActionManager.removeAction(e)},n}(t.ActionManager);t.UIAnimUtil=e,__reflect(e.prototype,"com_main.UIAnimUtil")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e.callback=null,e.m_frameTime=0,e.ROTATION_SPEED=360,e}return __extends(e,t),e.prototype.Update=function(){this.GetParam(),this.isLife=!0,this.m_total_time=1.5*this.m_time},e.prototype.Range=function(t,e){return t+Math.random()*(e-t)},e.prototype.GetParam=function(){this.m_a_x=1600,this.end_pos.x<this.start_pos.x&&(this.m_a_x=-this.m_a_x),this.m_a_y=1600,this.end_pos.y<this.start_pos.y&&(this.m_a_y=-this.m_a_y),this.m_v_x=900*this.Range(3,7)/10,Math.random()>.5&&(this.m_v_x=-this.m_v_x),this.m_v_y=900*this.Range(3,7)/10,Math.random()>.5&&(this.m_v_y=-this.m_v_y);var t=0,e=0;Math.abs(this.end_pos.y-this.start_pos.y)>Math.abs(this.end_pos.x-this.start_pos.x)?(t=(-this.m_v_y+Math.sqrt(Math.pow(this.m_v_y,2)+2*this.m_a_y*(this.end_pos.y-this.start_pos.y)))/this.m_a_y,e=(-this.m_v_y-Math.sqrt(Math.pow(this.m_v_y,2)+2*this.m_a_y*(this.end_pos.y-this.start_pos.y)))/this.m_a_y,t>0&&e>0?this.m_time=e>t?t:e:this.m_time=t>e?t:e,this.m_a_x=2*(this.end_pos.x-this.start_pos.x-this.m_v_x*this.m_time)/this.m_time/this.m_time):(t=(-this.m_v_x+Math.sqrt(Math.pow(this.m_v_x,2)+2*this.m_a_x*(this.end_pos.x-this.start_pos.x)))/this.m_a_x,e=(-this.m_v_x-Math.sqrt(Math.pow(this.m_v_x,2)+2*this.m_a_x*(this.end_pos.x-this.start_pos.x)))/this.m_a_x,t>0&&e>0?this.m_time=e>t?t:e:this.m_time=t>e?t:e,this.m_a_y=2*(this.end_pos.y-this.start_pos.y-this.m_v_y*this.m_time)/this.m_time/this.m_time)},e.prototype.onEnterFrame=function(t){if(this.isLife){this.m_frameTime+=t;var e=this.m_frameTime;if(e>this.m_total_time)return this.isLife=!1,this.handle_trans.x=this.end_pos.x,this.handle_trans.y=this.end_pos.y,this.handle_trans.skewY=0,void(null!=this.callback&&(this.callback(this.handle_trans),this.callback=null));var n=e<this.m_time?e/2*e/this.m_time:e-this.m_time/2,i=this.m_v_x*n+this.m_a_x*n*n/2,r=this.m_v_y*n+this.m_a_y*n*n/2;this.handle_trans.x=this.start_pos.x+i,this.handle_trans.y=this.start_pos.y+r,this.handle_trans.skewY=this.ROTATION_SPEED*e}},e}(t.Animate);t.UIMoneyEffectAnim=e,__reflect(e.prototype,"com_main.UIMoneyEffectAnim");var n=function(n){function i(){return n.call(this)||this}return __extends(i,n),i.DoAnim=function(n,r,o,s){var a={target:n,handle_func:s};this.create(n,e,a);var h=t.UIAnimUtil.m_qActions[n.hashCode];h.handle_trans=n,h.start_pos=r,h.end_pos=o,h.callback=i.Update,h.Update()},i.Update=function(t){var e=t.hashCode,n=i.m_qActions[e],r=i.m_qAttrs[e];!n.isLife&&r.handle_func&&r.handle_func(r.target),n.isLife||i.removeAction(t)},i}(t.ActionManager);t.UIMoneyEffectManager=n,__reflect(n.prototype,"com_main.UIMoneyEffectManager")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){}return t.produce=function(t){var e=t.keyClass;null==this.cacheDict[e]&&(this.cacheDict[e]=[]);var n,i=this.cacheDict[e];return i.length>0?n=i.pop():(n=new t,n.key=e),n},t.reclaim=function(t){var e=t.key;null==this.cacheDict[e]&&(this.cacheDict[e]=[]);var n=this.cacheDict[e];-1==n.indexOf(t)&&n.push(t)},t.reclaimObjFromArr=function(e,n){for(var i in n){var r=n[i];e.splice(e.indexOf(r),1),t.reclaim(r)}},t.cacheDict={},t}();t.CachePool=e,__reflect(e.prototype,"com_main.CachePool");var n=function(t){function e(e){return t.call(this,RES.getRes(e))||this}return __extends(e,t),e.produce=function(t){null==this.cacheDict[t]&&(this.cacheDict[t]=[]);var n,i=this.cacheDict[t];return n=i.length>0?i.pop():new e(t)},e.reclaim=function(t,e){null==this.cacheDict[e]&&(this.cacheDict[e]=[]);var n=this.cacheDict[e];-1!=n.indexOf(t)&&(n.push(t),console.warn("回收后的长度：",n.length))},e.cacheDict={},e}(egret.Bitmap);t.PoolBM=n,__reflect(n.prototype,"com_main.PoolBM");var i=function(t){function e(e){var n=t.call(this)||this;return Utils.setProps(n,{text:""+e,textAlign:"center",textColor:16106782,size:30,fontFamily:"Microsoft Yahei"},[.5,1]),n}return __extends(e,t),e.produce=function(t){null==this.cacheDict[t]&&(this.cacheDict[t]=[]);var n,i=this.cacheDict[t];return n=i.length>0?i.pop():new e(t)},e.reclaim=function(t,e){null==this.cacheDict[e]&&(this.cacheDict[e]=[]);var n=this.cacheDict[e];-1==n.indexOf(t)&&n.push(t)},e.prototype.setText=function(t){this.text=""+t},e.cacheDict={},e.key="ADD_SCORE",e}(egret.TextField);t.PoolTF=i,__reflect(i.prototype,"com_main.PoolTF")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(t,e){this.key=t,this.data=e}return t}();t.CacheNode=e,__reflect(e.prototype,"com_main.CacheNode");var n=function(){function t(t){this.$capacity=0,this.$hashmap={},this.$capacity=t,this.$head=new e,this.$tail=new e,this.$head.next=this.$tail,this.$tail.prev=this.$head}return t.prototype.print=function(){console.log(this.$hashmap)},t.prototype.get=function(t){var e=this.$hashmap[t];return e?1==this.count?e.data:(this.detach(e),this.attach(this.$head,e),e.data):""},t.prototype.pack=function(t,n){if(!(this.$capacity<=0)){var i=this.$hashmap[t];if(i)this.detach(i),this.attach(this.$head,i),i.data=n;else if(i=new e(t,n),this.$hashmap[t]=i,this.attach(this.$head,i),this.count>this.$capacity){var r=this.$tail.prev;return this.remove(r.key),r}return null}},t.prototype.remove=function(t){var e=this.$hashmap[t];e&&(this.detach(e),this.$hashmap[t]=null,delete this.$hashmap[t])},t.prototype.removeAll=function(){for(var t=Object.keys(this.$hashmap),e=0;e<t.length;e++)this.remove(t[e])},Object.defineProperty(t.prototype,"hashmap",{get:function(){return this.$hashmap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){var t=Object.keys(this.$hashmap);return t.length},enumerable:!0,configurable:!0}),t.prototype.attach=function(t,e){e.prev=t,e.next=t.next,e.next.prev=e,e.prev.next=e},t.prototype.detach=function(t){t.prev.next=t.next,t.next.prev=t.prev},t}();t.LRUCache=n,__reflect(n.prototype,"com_main.LRUCache")}(com_main||(com_main={}));var BerZerUtils=function(){function t(){}return t.getBerZerPoints=function(t,e,n,i,r){void 0===r&&(r=!1);var o=i.length;t=2*t;for(var s=0,a=1/t,h=[],c=0;t>c;c++){var l=0,p=0,u=0,m=0,_=0;2==o?(l=this.get3BerZerValue(s,e.x,i[0].x,i[1].x,n.x),p=this.get3BerZerValue(s,e.y,i[0].y,i[1].y,n.y),r&&(u=this.get3BerZerRotation(s,e.x,i[0].x,i[1].x,n.x),m=this.get3BerZerRotation(s,e.y,i[0].y,i[1].y,n.y),_=Math.atan2(m,u))):(l=this.get2BerZerValue(s,e.x,i[0].x,n.x),p=this.get2BerZerValue(s,e.y,i[0].y,n.y),r&&(u=this.get2BerZerRotation(s,e.x,i[0].x,n.x),m=this.get2BerZerRotation(s,e.y,i[0].y,n.y),_=Math.atan2(m,u)));var f=egret.Point.create(l,p);r&&(f.rotation=180*_/Math.PI),h.push(f),s+=a}return h},t.get2BerZerValue=function(t,e,n,i){var r=(1-t)*(1-t)*e+2*t*(1-t)*n+t*t*i;return Math.floor(r)},t.get2BerZerRotation=function(t,e,n,i){var r=-2*(1-t)*e+2*(-t+(1-t))*n+2*t*i;return r},t.get3BerZerValue=function(t,e,n,i,r){var o=e*Math.pow(1-t,3)+3*n*t*Math.pow(1-t,2)+3*i*Math.pow(t,2)*(1-t)+r*Math.pow(t,3);return Math.floor(o)},t.get3BerZerRotation=function(t,e,n,i,r){var o=-3*e*Math.pow(1-t,2)+3*n*(t*(-2*(1-t))+Math.pow(1-t,2))+3*i*(-Math.pow(t,2)+2*t*(1-t))+3*r*Math.pow(t,2);return o},t}();__reflect(BerZerUtils.prototype,"BerZerUtils");var L=function(){function t(){this.m_pLan=new Array}return t.getLanguageFormat=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=(o=t.getInstance()).getLanguageFormat.apply(o,[e].concat(n));return r||"";var o},t.prototype.getLanguageFormat=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var r=this.m_pLan[t.KEY_LAN][e];if(!r)return"##Not Exist##";r=r.replace(/%%/g,"%");for(var o in n){var s=n[o];t.SD_REG.test(r)&&(r=r.replace(RegExp.$1,s))}return r},t.getLanguage=function(e){var n=t.getInstance().getLanguage(e);return n||""},t.prototype.getLanguage=function(e){return this.m_pLan[t.KEY_LAN]?this.m_pLan[t.KEY_LAN][e]:""},t.prototype.getObject=function(){return this.m_pLan[t.KEY_LAN]},t.getInstance=function(){return t._instance||(t._instance=new t),t._instance},t.prototype.loadConfig=function(t,e){this.m_iLoadCount=0,this.m_pLoadedCallback=t,this.m_pCallInstance=e;var n="http://"+GameConst.IpRequestGame+"/loginserver/config/"+GameConst.IpRequestGame+"/language.zip";debug("lan_url",n)},t.prototype.onLoaded=function(){this.m_iLoadCount+=1,1==this.m_iLoadCount&&(this.m_pLoadedCallback.call(this.m_pCallInstance),this.m_pLoadedCallback=null,this.m_pCallInstance=null)},t.KEY_LAN="Language",t.REPLACE_REG=/{[a-zA-Z0-9]+}/,t.SD_REG=new RegExp("(%s|%d)"),t}();__reflect(L.prototype,"L");var WayTw;!function(t){t[t.FROM_TOP=0]="FROM_TOP",t[t.FROM_RIGHT=1]="FROM_RIGHT",t[t.FROM_BOTTOM=2]="FROM_BOTTOM",t[t.FROM_LEFT=3]="FROM_LEFT",t[t.TO_TOP=4]="TO_TOP",t[t.TO_RIGHT=5]="TO_RIGHT",t[t.TO_BOTTOM=6]="TO_BOTTOM",t[t.TO_LEFT=7]="TO_LEFT",t[t.SCALE_BOUNCE_FADE_IN=8]="SCALE_BOUNCE_FADE_IN",t[t.SCALE_BOUNCE_FADE_OUT=9]="SCALE_BOUNCE_FADE_OUT"}(WayTw||(WayTw={}));var LibTw=function(){function t(){}return t.prototype.shineAlphaObj=function(t,e,n,i){void 0===e&&(e=600),egret.Tween.removeTweens(t);var r=e/6;egret.Tween.get(t).to({alpha:.3},r).to({alpha:1},r).to({alpha:.3},r).to({alpha:1},r).to({alpha:.3},r).to({alpha:1},r).call(function(){egret.Tween.removeTweens(t),n&&n.call(i)})},t.prototype.shineScaleObj=function(t,e,n,i,r){void 0===e&&(e=600),void 0===n&&(n=.2);var o=1-n;egret.Tween.removeTweens(t);var s=e/6;egret.Tween.get(t).to({scaleX:o,scaleY:o},s).to({scaleX:1,scaleY:1},s).to({scaleX:o,scaleY:o},s).to({scaleX:1,scaleY:1},s).to({scaleX:o,scaleY:o},s).to({scaleX:1,scaleY:1},s).call(function(){egret.Tween.removeTweens(t),i&&i.call(r)})},t.prototype.twShakeObj=function(t,e,n,i){void 0===e&&(e=10);var r={x:t.x,y:t.y};egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:r.x-e,y:r.y+e},50).to({x:r.x+e,y:r.y-e},50).to({x:r.x-e,y:r.y+e},50).to({x:r.x,y:r.y},50).to({x:r.x-e,y:r.y+e},50).to({x:r.x+e,y:r.y-e},50).to({x:r.x-e,y:r.y+e},50).to({x:r.x,y:r.y},50).call(function(){egret.Tween.removeTweens(t),n&&n.call(i)})},t.prototype.twBounceFadeIn=function(t,e){var n=t.scaleX;egret.Tween.get(t).to({scaleX:1.05*n,scaleY:1.05*n},50).to({scaleX:n,scaleY:n},150).call(function(){e&&e(),egret.Tween.removeTweens(t)})},t.prototype.twBounceFadeOut=function(t,e){var n=t.scaleX;egret.Tween.get(t).to({scaleX:1.05*n,scaleY:1.05*n},50).to({scaleX:n,scaleY:n},150).to({alpha:.01},180).call(function(){e&&e(),egret.Tween.removeTweens(t)})},t.prototype.twFromStageTop=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.y,s=t.parent.globalToLocal(0,0);t.y=s.y-(t.height-t.anchorOffsetY),egret.Tween.removeTweens(t),egret.Tween.get(t).to({y:o},e,n?egret.Ease.bounceOut:null).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this),t.visible=!0},t.prototype.twToStageTop=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.y,s=t.parent.globalToLocal(0,0),a=s.y-(t.height-t.anchorOffsetY);egret.Tween.removeTweens(t),egret.Tween.get(t).to({y:a},e,n?egret.Ease.bounceIn:null).set({visible:!1,y:o}).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this)},t.prototype.twFromStageBtm=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.y,s=t.parent.globalToLocal(0,t.parent.stage.stageHeight);t.y=s.y+t.anchorOffsetY,egret.Tween.removeTweens(t),egret.Tween.get(t).to({y:o},e,n?egret.Ease.bounceOut:null).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this),t.visible=!0},t.prototype.twToStageBtm=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.y,s=t.parent.globalToLocal(0,t.parent.stage.stageHeight),a=s.y+t.anchorOffsetY;egret.Tween.removeTweens(t),egret.Tween.get(t).to({y:a},e,n?egret.Ease.bounceIn:null).set({visible:!1,y:o}).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this)},t.prototype.twFromLeftToTarget=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.x,s=t.parent.globalToLocal(0,0);t.x=s.x-(t.width-t.anchorOffsetX),egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:o},e,n?egret.Ease.bounceOut:null).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this),t.visible=!0},t.prototype.twToStageRight=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.x,s=t.parent.globalToLocal(t.stage.stageWidth,0),a=s.x-t.anchorOffsetX;egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:a},e,n?egret.Ease.bounceIn:null).set({visible:!1,x:o}).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this)},t.prototype.twFromRightToTarget=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.x,s=t.parent.globalToLocal(t.stage.stageWidth,0);t.x=s.x+t.anchorOffsetX,egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:o},e,n?egret.Ease.bounceOut:null).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this),t.visible=!0},t.prototype.twToStageLeft=function(t,e,n,i,r){void 0===e&&(e=300),void 0===n&&(n=!0);var o=t.x,s=t.parent.globalToLocal(0,0),a=s.x-(t.width-t.anchorOffsetX);egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:a},e,n?egret.Ease.bounceIn:null).set({visible:!1,x:o}).call(function(){egret.Tween.removeTweens(t),i&&(r?i.call(r):i())},this)},t.prototype.twShakeObjToRightUp=function(t,e,n){var i=10,r={x:t.x,y:t.y};egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:r.x-i,y:r.y+i},50).to({x:r.x+i,y:r.y-i},50).to({x:r.x,y:r.y},25).call(function(){egret.Tween.removeTweens(t),e&&e.call(n)
})},t.prototype.twShakeObjToLeftBtm=function(t,e,n){var i=10,r={x:t.x,y:t.y};egret.Tween.removeTweens(t),egret.Tween.get(t).to({x:r.x+i,y:r.y-i},50).to({x:r.x-i,y:r.y+i},50).to({x:r.x,y:r.y},25).call(function(){egret.Tween.removeTweens(t),e&&e.call(n)})},Object.defineProperty(t,"inst",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t}();__reflect(LibTw.prototype,"LibTw");var LocalData=function(){function t(){}return t.setData=function(t,e){egret.localStorage.setItem(t,e)},t.getData=function(t){var e;return e=egret.localStorage.getItem(t),e?e:""},t.removeData=function(t){egret.localStorage.removeItem(t)},t}();__reflect(LocalData.prototype,"LocalData");var Long=function(){function t(t,e,n){this.__isLong__={value:!0,enumerable:!1,configurable:!1},this.low=0|t,this.high=0|e,this.unsigned=!!n}return t.prototype.isLong=function(t){return(t&&t.__isLong__)===!0},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*t.TWO_PWR_32_DBL+(this.low>>>0):this.high*t.TWO_PWR_32_DBL+(this.low>>>0)},t.prototype.toString=function(e){if(e=e||10,2>e||e>36)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var n=t.fromNumber(e),i=this.div(n),r=i.mul(n).sub(this);return i.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=t.fromNumber(t.pow_dbl(e,6),this.unsigned),s=this,a="";;){var h=s.div(o),c=s.sub(h.mul(o)).toInt()>>>0,l=c.toString(e);if(s=h,s.isZero())return l+a;for(;l.length<6;)l="0"+l;a=""+l+a}},Object.defineProperty(t.prototype,"highBitsUnsigned",{get:function(){return this.high>>>0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lowBitsUnsigned",{get:function(){return this.low>>>0},enumerable:!0,configurable:!0}),t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,n=31;n>0&&0==(e&1<<n);n--);return 0!=this.high?n+33:n+1},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isOdd=function(){return 1===(1&this.low)},t.prototype.isEven=function(){return 0===(1&this.low)},t.prototype.eq=function(e){return this.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.neq=function(t){return!this.eq(t)},t.prototype.lt=function(t){return this.compare(t)<0},t.prototype.lte=function(t){return this.compare(t)<=0},t.prototype.gt=function(t){return this.compare(t)>0},t.prototype.gte=function(t){return this.compare(t)>=0},t.prototype.compare=function(e){if(this.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.neg=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.add=function(e){this.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,i=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,h=e.low>>>16,c=65535&e.low,l=0,p=0,u=0,m=0;return m+=o+c,u+=m>>>16,m&=65535,u+=r+h,p+=u>>>16,u&=65535,p+=i+a,l+=p>>>16,p&=65535,l+=n+s,l&=65535,t.fromBits(u<<16|m,l<<16|p,this.unsigned)},t.prototype.sub=function(e){return this.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.mul=function(e){if(this.isZero())return t.ZERO;if(this.isLong(e)||(e=t.fromValue(e)),e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,h=e.low>>>16,c=65535&e.low,l=0,p=0,u=0,m=0;return m+=o*c,u+=m>>>16,m&=65535,u+=r*c,p+=u>>>16,u&=65535,u+=o*h,p+=u>>>16,u&=65535,p+=i*c,l+=p>>>16,p&=65535,p+=r*h,l+=p>>>16,p&=65535,p+=o*a,l+=p>>>16,p&=65535,l+=n*c+i*h+r*a+o*s,l&=65535,t.fromBits(u<<16|m,l<<16|p,this.unsigned)},t.prototype.div=function(e){if(this.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,i,r;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;r=t.UZERO}else{if(this.eq(t.MIN_VALUE)){if(e.eq(t.ONE)||e.eq(t.NEG_ONE))return t.MIN_VALUE;if(e.eq(t.MIN_VALUE))return t.ONE;var o=this.shr(1);return n=o.div(e).shl(1),n.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(i=this.sub(e.mul(n)),r=n.add(i.div(e)))}if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=t.ZERO}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(n)/Math.LN2),a=48>=s?1:t.pow_dbl(2,s-48),h=t.fromNumber(n),c=h.mul(e);c.isNegative()||c.gt(i);)n-=a,h=t.fromNumber(n,this.unsigned),c=h.mul(e);h.isZero()&&(h=t.ONE),r=r.add(h),i=i.sub(c)}return r},t.prototype.mod=function(e){return this.isLong(e)||(e=t.fromValue(e)),this.sub(this.div(e).mul(e))},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.and=function(e){return this.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.or=function(e){return this.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.xor=function(e){return this.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.shl=function(e){return this.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shr=function(e){return this.isLong(e)&&(e=e.toInt()),0===(e&=63)?this:32>e?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shru=function(e){if(this.isLong(e)&&(e=e.toInt()),e&=63,0===e)return this;var n=this.high;if(32>e){var i=this.low;return t.fromBits(i>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24&255,255&t,t>>>8&255,t>>>16&255,t>>>24&255]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24&255,t>>>16&255,t>>>8&255,255&t,e>>>24&255,e>>>16&255,e>>>8&255,255&e]},t.fromInt=function(e,n){var i,r,o;return n?(e>>>=0,(o=e>=0&&256>e)&&(r=t.UINT_CACHE[e])?r:(i=t.fromBits(e,0>(0|e)?-1:0,!0),o&&(t.UINT_CACHE[e]=i),i)):(e|=0,(o=e>=-128&&128>e)&&(r=t.INT_CACHE[e])?r:(i=t.fromBits(e,0>e?-1:0,!1),o&&(t.INT_CACHE[e]=i),i))},t.fromNumber=function(e,n){if(isNaN(e)||!isFinite(e))return n?t.UZERO:t.ZERO;if(n){if(0>e)return t.UZERO;if(e>=t.TWO_PWR_64_DBL)return t.MAX_UNSIGNED_VALUE}else{if(e<=-t.TWO_PWR_63_DBL)return t.MIN_VALUE;if(e+1>=t.TWO_PWR_63_DBL)return t.MAX_VALUE}return 0>e?t.fromNumber(-e,n).neg():t.fromBits(e%t.TWO_PWR_32_DBL|0,e/t.TWO_PWR_32_DBL|0,n)},t.fromBits=function(e,n,i){return new t(e,n,i)},t.fromString=function(e,n,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof n?(i=n,n=!1):n=!!n,i=i||10,2>i||i>36)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return t.fromString(e.substring(1),n,i).neg();for(var o=t.fromNumber(t.pow_dbl(i,8)),s=t.ZERO,a=0;a<e.length;a+=8){var h=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+h),i);if(8>h){var l=t.fromNumber(t.pow_dbl(i,h));s=s.mul(l).add(t.fromNumber(c))}else s=s.mul(o),s=s.add(t.fromNumber(c))}return s.unsigned=n,s},t.fromValue=function(e){return e instanceof t?e:"number"==typeof e?t.fromNumber(e):"string"==typeof e?t.fromString(e):t.fromBits(e.low,e.high,e.unsigned)},t.INT_CACHE={},t.UINT_CACHE={},t.TWO_PWR_16_DBL=65536,t.TWO_PWR_24_DBL=1<<24,t.TWO_PWR_32_DBL=t.TWO_PWR_16_DBL*t.TWO_PWR_16_DBL,t.TWO_PWR_64_DBL=t.TWO_PWR_32_DBL*t.TWO_PWR_32_DBL,t.TWO_PWR_63_DBL=t.TWO_PWR_64_DBL/2,t.TWO_PWR_24=t.fromInt(t.TWO_PWR_24_DBL),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t.pow_dbl=Math.pow,t}();__reflect(Long.prototype,"Long");var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var i=Array(16),r=Array(16),o=0;16>o;o++)i[o]=909522486^n[o],r[o]=1549556828^n[o];var s=this.binl_md5(i.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(r.concat(s),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,i=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",r="",o=0;o<t.length;o++)n=t.charCodeAt(o),r+=i.charAt(n>>>4&15)+i.charAt(15&n);return r},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",r=t.length,o=0;r>o;o+=3)for(var s=t.charCodeAt(o)<<16|(r>o+1?t.charCodeAt(o+1)<<8:0)|(r>o+2?t.charCodeAt(o+2):0),a=0;4>a;a++)i+=8*o+6*a>8*t.length?this.b64pad:n.charAt(s>>>6*(3-a)&63);return i},t.prototype.rstr2any=function(t,e){var n,i,r,o,s,a=e.length,h=Array(Math.ceil(t.length/2));for(n=0;n<h.length;n++)h[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),l=Array(c);for(i=0;c>i;i++){for(s=Array(),o=0,n=0;n<h.length;n++)o=(o<<16)+h[n],r=Math.floor(o/a),o-=r*a,(s.length>0||r>0)&&(s[s.length]=r);l[i]=o,h=s}var p="";for(n=l.length-1;n>=0;n--)p+=e.charAt(l[n]);return p},t.prototype.str2rstr_utf8=function(t){for(var e,n,i="",r=-1;++r<t.length;)e=t.charCodeAt(r),n=r+1<t.length?t.charCodeAt(r+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),r++),127>=e?i+=String.fromCharCode(e):2047>=e?i+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?i+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(i+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return i},t.prototype.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.prototype.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,i=-271733879,r=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=n,h=i,c=r,l=o;n=this.md5_ff(n,i,r,o,t[s+0],7,-680876936),o=this.md5_ff(o,n,i,r,t[s+1],12,-389564586),r=this.md5_ff(r,o,n,i,t[s+2],17,606105819),i=this.md5_ff(i,r,o,n,t[s+3],22,-1044525330),n=this.md5_ff(n,i,r,o,t[s+4],7,-176418897),o=this.md5_ff(o,n,i,r,t[s+5],12,1200080426),r=this.md5_ff(r,o,n,i,t[s+6],17,-1473231341),i=this.md5_ff(i,r,o,n,t[s+7],22,-45705983),n=this.md5_ff(n,i,r,o,t[s+8],7,1770035416),o=this.md5_ff(o,n,i,r,t[s+9],12,-1958414417),r=this.md5_ff(r,o,n,i,t[s+10],17,-42063),i=this.md5_ff(i,r,o,n,t[s+11],22,-1990404162),n=this.md5_ff(n,i,r,o,t[s+12],7,1804603682),o=this.md5_ff(o,n,i,r,t[s+13],12,-40341101),r=this.md5_ff(r,o,n,i,t[s+14],17,-1502002290),i=this.md5_ff(i,r,o,n,t[s+15],22,1236535329),n=this.md5_gg(n,i,r,o,t[s+1],5,-165796510),o=this.md5_gg(o,n,i,r,t[s+6],9,-1069501632),r=this.md5_gg(r,o,n,i,t[s+11],14,643717713),i=this.md5_gg(i,r,o,n,t[s+0],20,-373897302),n=this.md5_gg(n,i,r,o,t[s+5],5,-701558691),o=this.md5_gg(o,n,i,r,t[s+10],9,38016083),r=this.md5_gg(r,o,n,i,t[s+15],14,-660478335),i=this.md5_gg(i,r,o,n,t[s+4],20,-405537848),n=this.md5_gg(n,i,r,o,t[s+9],5,568446438),o=this.md5_gg(o,n,i,r,t[s+14],9,-1019803690),r=this.md5_gg(r,o,n,i,t[s+3],14,-187363961),i=this.md5_gg(i,r,o,n,t[s+8],20,1163531501),n=this.md5_gg(n,i,r,o,t[s+13],5,-1444681467),o=this.md5_gg(o,n,i,r,t[s+2],9,-51403784),r=this.md5_gg(r,o,n,i,t[s+7],14,1735328473),i=this.md5_gg(i,r,o,n,t[s+12],20,-1926607734),n=this.md5_hh(n,i,r,o,t[s+5],4,-378558),o=this.md5_hh(o,n,i,r,t[s+8],11,-2022574463),r=this.md5_hh(r,o,n,i,t[s+11],16,1839030562),i=this.md5_hh(i,r,o,n,t[s+14],23,-35309556),n=this.md5_hh(n,i,r,o,t[s+1],4,-1530992060),o=this.md5_hh(o,n,i,r,t[s+4],11,1272893353),r=this.md5_hh(r,o,n,i,t[s+7],16,-155497632),i=this.md5_hh(i,r,o,n,t[s+10],23,-1094730640),n=this.md5_hh(n,i,r,o,t[s+13],4,681279174),o=this.md5_hh(o,n,i,r,t[s+0],11,-358537222),r=this.md5_hh(r,o,n,i,t[s+3],16,-722521979),i=this.md5_hh(i,r,o,n,t[s+6],23,76029189),n=this.md5_hh(n,i,r,o,t[s+9],4,-640364487),o=this.md5_hh(o,n,i,r,t[s+12],11,-421815835),r=this.md5_hh(r,o,n,i,t[s+15],16,530742520),i=this.md5_hh(i,r,o,n,t[s+2],23,-995338651),n=this.md5_ii(n,i,r,o,t[s+0],6,-198630844),o=this.md5_ii(o,n,i,r,t[s+7],10,1126891415),r=this.md5_ii(r,o,n,i,t[s+14],15,-1416354905),i=this.md5_ii(i,r,o,n,t[s+5],21,-57434055),n=this.md5_ii(n,i,r,o,t[s+12],6,1700485571),o=this.md5_ii(o,n,i,r,t[s+3],10,-1894986606),r=this.md5_ii(r,o,n,i,t[s+10],15,-1051523),i=this.md5_ii(i,r,o,n,t[s+1],21,-2054922799),n=this.md5_ii(n,i,r,o,t[s+8],6,1873313359),o=this.md5_ii(o,n,i,r,t[s+15],10,-30611744),r=this.md5_ii(r,o,n,i,t[s+6],15,-1560198380),i=this.md5_ii(i,r,o,n,t[s+13],21,1309151649),n=this.md5_ii(n,i,r,o,t[s+4],6,-145523070),o=this.md5_ii(o,n,i,r,t[s+11],10,-1120210379),r=this.md5_ii(r,o,n,i,t[s+2],15,718787259),i=this.md5_ii(i,r,o,n,t[s+9],21,-343485551),n=this.safe_add(n,a),i=this.safe_add(i,h),r=this.safe_add(r,c),o=this.safe_add(o,l)}return[n,i,r,o]},t.prototype.md5_cmn=function(t,e,n,i,r,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,o)),r),n)},t.prototype.md5_ff=function(t,e,n,i,r,o,s){return this.md5_cmn(e&n|~e&i,t,e,r,o,s)},t.prototype.md5_gg=function(t,e,n,i,r,o,s){return this.md5_cmn(e&i|n&~i,t,e,r,o,s)},t.prototype.md5_hh=function(t,e,n,i,r,o,s){return this.md5_cmn(e^n^i,t,e,r,o,s)},t.prototype.md5_ii=function(t,e,n,i,r,o,s){return this.md5_cmn(n^(e|~i),t,e,r,o,s)},t.prototype.safe_add=function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var ObjectPool=function(){function t(){this._objs=new Array}return t.prototype.pushObj=function(t){this._objs.push(t)},t.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},t.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},t.pop=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];t._content[e]||(t._content[e]=[]);var r,o=n.length,s=t._content[e];if(s.length)return r=s.pop(),r.init&&(0==o?r.init():1==o?r.init(n[0]):2==o?r.init(n[0],n[1]):3==o?r.init(n[0],n[1],n[2]):4==o?r.init(n[0],n[1],n[2],n[3]):5==o&&r.init(n[0],n[1],n[2],n[3],n[4])),r;var a=egret.getDefinitionByName(e);return 0==o?r=new a:1==o?r=new a(n[0]):2==o?r=new a(n[0],n[1]):3==o?r=new a(n[0],n[1],n[2]):4==o?r=new a(n[0],n[1],n[2],n[3]):5==o&&(r=new a(n[0],n[1],n[2],n[3],n[4])),r.ObjectPoolKey=e,r},t.popWithExtraKey=function(e,n){t._content[e]||(t._content[e]=[]);var i,r=t._content[e];if(r.length)for(var o=0;o<r.length;o++)if(r[o].extraKey==n){i=r[o],r.splice(o,1);break}if(!i){var s=egret.getDefinitionByName(e);i=new s(n),i.extraKey=n,i.ObjectPoolKey=e}return i},t.push=function(e){if(null==e)return!1;var n=e.ObjectPoolKey;return t._content[n]?(t._content[n].push(e),!0):!1},t.clear=function(){t._content={}},t.clearClass=function(e,n){void 0===n&&(n=null);for(var i=t._content[e];i&&i.length;){var r=i.pop();n&&r[n](),r=null}t._content[e]=null,delete t._content[e]},t.dealFunc=function(e,n){var i=t._content[e];if(null!=i){var r=0,o=i.length;for(r;o>r;r++)i[r][n]()}},t._content={},t}();__reflect(ObjectPool.prototype,"ObjectPool");var ArraySort;!function(t){t[t.UPPER=1]="UPPER",t[t.LOWER=2]="LOWER"}(ArraySort||(ArraySort={}));var SortTools=function(){function t(){}return t.MoreKeysSorter=function(t,e,n){var i=0,r=function(t,o){var s=e[i],a=n[i];return t[s]==o[s]?(i+=1,i>e.length?(i=0,-1):r(t,o)):(i=0,a==ArraySort.UPPER?t[s]-o[s]:o[s]-t[s])};t.sort(r)},t.sortMap=function(t,e,n){void 0===n&&(n=!0),t.sort(function(t,i){return n?t[e]-i[e]:i[e]-t[e]})},t}();__reflect(SortTools.prototype,"SortTools");var SoundGame=function(t){function e(){var e=t.call(this)||this;return e.initLsMusic(),e.arrCmdEvents=[SoundNav.PLAY,SoundNav.STOP],e.register(),e}return __extends(e,t),e.prototype.execute=function(t){var e=t.getName(),n=t.getBody(),i=n[0];switch(e){case SoundNav.PLAY:this.playSound(i);break;case SoundNav.STOP:this.stopSound(i)}},e.prototype.onDestroy=function(){this.arrSound=null,this.arrSoundChannel=null,this.unRegister()},e.prototype.playSound=function(t){var e=this.arrSound[t];if(!e)return void console.warn("no sound - play",t);var n=this.arrSoundChannel[t];n&&0!=n.position||(n=e.play(0,1),this.arrSoundChannel[t]=n)},e.prototype.stopSound=function(t){var e=this.arrSound[t];if(!e)return void console.warn("no sound - stop",t);var n=this.arrSoundChannel[t];n&&0!=n.position&&n.stop()},e.prototype.initLsMusic=function(){var t=[];this.arrSound=t,this.arrSoundChannel=[]},e}(AGame.EventHandler);__reflect(SoundGame.prototype,"SoundGame");var TimerManager=function(t){function e(){var e=t.call(this)||this;return e._handlers=new Array,e._delHandlers=new Array,e._currTime=egret.getTimer(),e._count=0,e._timeScale=1,e._fps=60,e._fps_time=1e3/e._fps,egret.startTick(e.onEnterFrame,e),e}return __extends(e,t),e.prototype.setTimeScale=function(t){this._timeScale=t},e.prototype.onEnterFrame=function(t){.001*(t-this._currTime);this._currTime=t;for(var e=this._count,n=0;e>n;n++){var i=this._handlers[n];if(i&&t>=i.exeTime&&(i.method.call(i.methodObj,(t-i.dealTime)*this._timeScale),i.dealTime=t,i.exeTime+=i.delay,!i.repeat))if(i.repeatCount>1)i.repeatCount--;else{var r=i.complateMethod,o=i.complateMethodObj;this.remove(r,o),r&&r.apply(o)}}return!1},e.prototype.create=function(t,e,n,i,r,o,s){if(!(0>e||0>n||null==i)){this.remove(i,r);var a=ObjectPool.pop("TimerHandler");a.userFrame=t,a.repeat=0==n,a.repeatCount=n,a.delay=e,a.method=i,a.methodObj=r,a.complateMethod=o,a.complateMethodObj=s,a.exeTime=e+this._currTime,a.dealTime=this._currTime,this._handlers.push(a),this._count++}},e.prototype.doTimer=function(t,e,n,i,r,o){void 0===r&&(r=null),void 0===o&&(o=null),this.create(!1,t,e,n,i,r,o)},e.prototype.doFrame=function(t,e,n,i,r,o){void 0===r&&(r=null),void 0===o&&(o=null),this.create(!1,t*this._fps_time,e,n,i,r,o)},Object.defineProperty(e,"getInst",{get:function(){return this.inst||(this.inst=new e),this.inst},enumerable:!0,configurable:!0}),e.doTimer=function(t,n,i,r,o,s){void 0===o&&(o=null),void 0===s&&(s=null),e.getInst.create(!1,t,n,i,r,o,s)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.remove=function(t,n){e.getInst.remove(t,n)},e.prototype.remove=function(t,e){for(var n=0;n<this._count;n++){var i=this._handlers[n];if(i.method==t&&i.methodObj==e){i.clear(),this._handlers.splice(n,1),ObjectPool.push(i),this._count--;break}}},e.prototype.removeAll=function(t){for(var e=0;e<this._count;e++){var n=this._handlers[e];n.methodObj==t&&(this._handlers.splice(e,1),ObjectPool.push(n),this._count--,e--)}},e.prototype.isExists=function(t,e){for(var n=0;n<this._count;n++){var i=this._handlers[n];if(i.method==t&&i.methodObj==e)return!0}return!1},e}(egret.HashObject);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.repeatCount=0,this.exeTime=0,this.dealTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.complateMethod=null,this.complateMethodObj=null},t}();__reflect(TimerHandler.prototype,"TimerHandler");var TimerServerUtils=function(){function t(){}return t.getServerTime=function(){return Math.floor(this.getServerTimeMill()/1e3)},t.getServerTimeMill=function(){return this.ServerTime+((new Date).getTime()-this.ServerTimeStamp)},t.getServerTimeYmd=function(){return Number(this.dateFormat("yyyyMMdd",this.getServerTime()))},t.getServerTimeYmd2=function(){return this.dateFormat("yyyyMMdd-hh:mm:ss",this.getServerTime())},t.dateFormat=function(t,e){var n=new Date(1e3*e),i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in i)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return t},t.diffTimeFormat=function(t,e,n){void 0===n&&(n=1);var i=Utils.number2int(e/86400),r=Utils.number2int(e%86400/3600),o=Utils.number2int(e%3600/60),s=Utils.number2int(e%60);new RegExp("(d+)").test(t)||(r+=24*i),new RegExp("(h+)").test(t)||(o+=60*r);var a={"d+":i,"h+":r,"m+":o,"s+":s};for(var h in a)new RegExp("("+h+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[h]:1==(""+a[h]).length?"0"+a[h]:a[h]));return t},t.format1=function(t){return this.diffTimeFormat("hh:mm:ss",t)},t.ServerTime=0,t.ServerTimeStamp=(new Date).getTime(),t}();__reflect(TimerServerUtils.prototype,"TimerServerUtils");var TimerUtils=function(t){function e(){return t.call(this,0,0)||this}return __extends(e,t),e.prototype.startTime=function(t,e,n,i,r){this.delay=t,this.repeatCount=e,this.funTimer=n,this.funTimerComplete=r,this.contex=i,this.reset(),this.addEventListener(egret.TimerEvent.TIMER,this.timer,this),this.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComplete,this),this.start()},e.prototype.timer=function(){this.funTimer&&this.funTimer.call(this.contex)},e.prototype.timerComplete=function(){this.funTimerComplete&&this.funTimerComplete.call(this.contex),this.removeEventListener(egret.TimerEvent.TIMER,this.funTimer,this.contex),this.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComplete,this),this.funTimer=this.funTimerComplete=this.contex=this.objDataTimer=null,com_main.CachePool.reclaim(this)},e.startTimer=function(t,n,i,r,o){var s=com_main.CachePool.produce(e);s.startTime(t,n,i,r,o)},e.keyClass="TimerUtils",e}(egret.Timer);__reflect(TimerUtils.prototype,"TimerUtils");var Utils=function(){function t(){}return t.getWindowWidth=function(){var t=480;return window&&window.innerWidth?t=window.innerWidth:document.body&&document.body.clientWidth&&(t=document.body.clientWidth),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(t=document.documentElement.clientWidth),t},t.getWindowHeight=function(){var t=800;return window&&window.innerHeight?t=window.innerHeight:document.body&&document.body.clientHeight&&(t=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(t=document.documentElement.clientHeight),t},t.arrayToMap=function(t,e){if(!t||0==t.length)return t;var n=[];for(var i in t){var r=t[i];n[r[e]]=r}return n},t.objectLenght=function(t){var e=Object.keys(t);return e.length},t.number2int=function(e){return parseInt(t.number2str(e))},t.number2str=function(t){return t},t.setObjAnchor=function(t,e){void 0===e&&(e=.5),t.anchorOffsetX=t.width*e,t.anchorOffsetY=t.height*e},t.stringFormatArr=function(t,e){var n=t;for(var i in e){var r=e[i];new RegExp("(%s|%d)").test(n)&&(n=n.replace(RegExp.$1,r))}return n},t.lengthChars=function(t){for(var e=0,n=0;n<t.length;n++)e+=t.charCodeAt(n)>255?2:1;return e},t.limitStrChars=function(t,e){if(this.lengthChars(t)>e){for(var n,i="",r=0;this.lengthChars(i)<e-3;)n=t.substr(r++,1),i+=n;i+="...",t=i}return t},t.getRequest=function(){var t=location.search,e=new Object;if(-1!=t.indexOf("?"))for(var n=t.substr(1),i=n.split("&"),r=0;r<i.length;r++)e[i[r].split("=")[0]]=decodeURIComponent(i[r].split("=")[1]);return e},t.stringFormat=function(e){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return e=e.replace(/%%/g,"%"),t.stringFormatArr(e,n)},t.copyDict=function(e,n){if(!e)return e;var i=e instanceof Array?[]:{};for(var r in e)"function"!=typeof e[r]&&(n?i[r]="object"==typeof e[r]?t.copyDict(e[r]):e[r]:i[r]=e[r]);return i},t.setViewCenter=function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===i&&(i=-1e4);for(var r=t.length,o=t[0].parent,s=0,a=0;r>a;a++){var h=t[a];s+=h.width,n&&(h.anchorOffsetX=h.width/2,h.anchorOffsetY=h.height/2)}s+=(r-1)*e;for(var c=n?t[0].width/2:0,l=(o.width-s)/2+c,a=0;r>a;a++){var h=t[a];h.x=l,-1e4!=i&&(h.y=i),l+=h.width+e}},t.setViewLink=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=-1e4);var i=t.length;if(!(2>i))for(var r=t[0],o=-1e4!=n?n:r.x,i=t.length,s=0;i>s;s++){var a=t[s];a.x=o,o+=a.width+e}},t.setRichLabel=function(e,n){n=t.parseLanRich(n),n=t.parseClickRich(n),n=n.replace(/<br>/gi,"\n"),e&&(e.textFlow=(new egret.HtmlTextParser).parser(n))},t.parseLanRich=function(t){var e=new RegExp("(.*)<color=(.*?)>(.*?)</color>(.*)"),n=null;do if(n=e.exec(t)){var i=RegExp.$2;i=-1==i.indexOf("#")?"#"+i.substr(0,6):i.substr(0,7);var r=RegExp.$1+"<font color='"+i+"'>"+RegExp.$3+"</font>"+RegExp.$4;t=r}while(null!=n);return t},t.parseClickRich=function(t){var e=new RegExp("(.*)<clk=(.*?)>(.*?)</clk>(.*)"),n=null;do if(n=e.exec(t)){var i=RegExp.$2,r=RegExp.$1+"<u><a href='event:"+i+"'>"+RegExp.$3+"</a></u>"+RegExp.$4;t=r}while(null!=n);return t},t.createTimer=function(t,e,n,i){void 0===n&&(n=1),void 0===i&&(i=0);var r=new egret.Timer(1e3*n,i);return r.addEventListener(egret.TimerEvent.TIMER,t,e),r},t.removeTimer=function(t,e,n){t.removeEventListener(egret.TimerEvent.TIMER,e,n)},t.Frame2Time=function(t){return Math.floor(1e3/60*t)},t.random=function(t,e){var n=Math.floor(Math.random()*(e-t+1))+t;return n},t.setGray=function(t,e){if(void 0===e&&(e=!0),e){var n=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],i=new egret.ColorMatrixFilter(n);t.filters=[i]}else t.filters=[]},t.setProps=function(t,e,n){for(var i in e)t[i]=e[i];n&&(t.anchorOffsetX=t.width*n[0],t.anchorOffsetY=t.height*n[1])},t.giveMask=function(t,e){void 0===e&&(e=0);var n=new egret.Shape;return n.graphics.beginFill(0),n.graphics.drawRoundRect(0,0,t.width,t.height,e,e),n.graphics.endFill(),this.setProps(n,{x:t.x-t.anchorOffsetX,y:t.y-t.anchorOffsetY}),t.parent&&t.parent.addChild(n),t.mask=n,n},t}();__reflect(Utils.prototype,"Utils");var com_main;!function(t){function e(t){var e=new i(t.type);return e.stageX=t.stageX,e.stageY=t.stageY,e.localX=t.localX,e.localY=t.localY,e.touchPointID=t.touchPointID,e.target=t.target,e.touchDown=t.touchDown,e}function n(t,e){e.type=t.type,e.stageX=t.stageX,e.stageY=t.stageY,e.localX=t.localX,e.localY=t.localY,e.touchPointID=t.touchPointID,e.target=t.target,e.touchDown=t.touchDown}t.cloneTouchEvent=e,t.setTouchProperties=n;var i=function(){function t(t){this.type=t}return t}();t.CCTouchEventData=i,__reflect(i.prototype,"com_main.CCTouchEventData")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){this.isTapBegin=!1,this.target=null,this.type="",this.listener=null,this.thisObject=null,this.argObject=null,this.useCapture=!1,this.isStopBubble=!1}return t.create=function(e,n,i,r,o,s,a){var h=new t;return h.target=e,h.type=n,h.listener=i,h.thisObject=r,h.argObject=o,h.isStopBubble=s,h.useCapture=a,h},t.prototype.dispose=function(){this.target=null,this.listener=null,this.thisObject=null,this.argObject=null},t}();t.CustomEvent=e,__reflect(e.prototype,"com_main.CustomEvent");var n=function(){function n(){this.m_pEventLists={},this.m_pNotifies={}}return n.getInstance=function(){return n._instance||(n._instance=new n),n._instance},n.prototype.listener=function(t){var e=t.currentTarget;if(this.m_pEventLists[e.hashCode]&&this.m_pEventLists[e.hashCode][t.type]){var n=this.m_pEventLists[e.hashCode][t.type];n.listener.call(n.thisObject,t)}},n.prototype.pushEventList=function(t,n,i,r,o,s,a){this.m_pEventLists[t.hashCode]||(this.m_pEventLists[t.hashCode]={}),this.m_pEventLists[t.hashCode][n]=e.create(t,n,i,r,o,s,a)},n.prototype.addNotify=function(t,n,i,r,o,s){t.addEventListener(n,i,r,o,s),this.m_pNotifies[t.hashCode]||(this.m_pNotifies[t.hashCode]=[]),this.m_pNotifies[t.hashCode].push(e.create(t,n,i,r,null,o))},n.prototype.addEventListener=function(t,e,n,i,r,o,s){this.addNotify(t,e,this.listener,this,r,o),this.pushEventList(t,e,i,n,s,!1,r)},n.prototype.doAnimScale=function(e,n){var i=t.TweenAnim.get(e),r=n.argObject?n.argObject:1,o=1.1*Number(r);i.to({scaleX:o,scaleY:o},100).to({scaleX:r,scaleY:r},100).call(function(n){n.isTapBegin=!1,t.TweenAnim.removeTweens(e)},this,[n])},n.prototype.onScaleTouch=function(e){var n=e.currentTarget,i=this.m_pEventLists[n.hashCode];if(i&&i[e.type]){var r=i[e.type];r.isStopBubble&&e.stopImmediatePropagation();var o=i[egret.TouchEvent.TOUCH_BEGIN];switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:var s=t.TweenAnim.get(e.currentTarget);r.isTapBegin=!0,s.to(r.argObject,100);break;case egret.TouchEvent.TOUCH_MOVE:var a=r.argObject?r.argObject:1;if(!r||r.isTapBegin||!o.isTapBegin||e.currentTarget.scaleX==a)return;r.isTapBegin=!0,this.doAnimScale(e.currentTarget,r),o.isTapBegin=!1;break;case egret.TouchEvent.TOUCH_END:case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:var a=r.argObject?r.argObject:1;if(!r||r.isTapBegin||!o.isTapBegin||e.currentTarget.scaleX==a)return;r.isTapBegin=!0,this.doAnimScale(e.currentTarget,r),o.isTapBegin=!1,r.listener&&r.thisObject&&r.listener.call(r.thisObject,e)}}},n.prototype.posAnchorCenter=function(t){0==t.anchorOffsetX&&(t.anchorOffsetX=t.width/2,t.anchorOffsetY=t.height/2,t.x+=t.anchorOffsetX,t.y+=t.anchorOffsetY)},n.prototype.addItemRenderAnim=function(t,e){void 0===e&&(e=.95),this.addScaleListener(t,e,null,null,1,!0)},n.prototype.addScaleListener=function(t,e,n,i,r,o,s){void 0===e&&(e=.95),this.addNotify(t,egret.TouchEvent.TOUCH_BEGIN,this.onScaleTouch,this),this.addNotify(t,egret.TouchEvent.TOUCH_END,this.onScaleTouch,this),o&&this.addNotify(t,egret.TouchEvent.TOUCH_MOVE,this.onScaleTouch,this),this.addNotify(t,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onScaleTouch,this),this.pushEventList(t,egret.TouchEvent.TOUCH_BEGIN,i,n,{scaleX:e,scaleY:e},s),this.pushEventList(t,egret.TouchEvent.TOUCH_END,i,n,r,s),o&&this.pushEventList(t,egret.TouchEvent.TOUCH_MOVE,i,n,r,s),this.pushEventList(t,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,i,n,r,s),this.posAnchorCenter(t)
},n.prototype.onFloatTouch=function(e){var n=e.currentTarget,i=this.m_pEventLists[n.hashCode];if(i&&i[e.type]){var r=i[e.type];r.isStopBubble&&e.stopImmediatePropagation();var o=i[egret.TouchEvent.TOUCH_BEGIN];switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:var s=t.TweenAnim.get(e.currentTarget);r.isTapBegin=!0,s.to(r.argObject,100);break;case egret.TouchEvent.TOUCH_END:case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:var a=r.argObject.y;if(!r||r.isTapBegin||!o.isTapBegin||e.currentTarget.y==a)return;r.isTapBegin=!0;var s=t.TweenAnim.get(e.currentTarget);s.to(r.argObject,100).call(function(t){t.isTapBegin=!1},this,[r]),o.isTapBegin=!1,r.listener&&r.thisObject&&r.listener.call(r.thisObject,e)}}},n.prototype.addFloatListener=function(t,e,n,i,r){void 0===e&&(e=3),this.addNotify(t,egret.TouchEvent.TOUCH_BEGIN,this.onFloatTouch,this),this.addNotify(t,egret.TouchEvent.TOUCH_END,this.onFloatTouch,this),this.addNotify(t,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onFloatTouch,this),this.pushEventList(t,egret.TouchEvent.TOUCH_BEGIN,i,n,{y:t.y+e},r),this.pushEventList(t,egret.TouchEvent.TOUCH_END,i,n,{y:t.y},r),this.pushEventList(t,egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,i,n,{y:t.y},r)},n.prototype.removeEventListener=function(t){var e,n=t.hashCode,i=this.m_pNotifies[n],r=this.m_pEventLists[n];if(i){for(var o=0;o<i.length;o++)e=i[o],t.removeEventListener(e.type,e.listener,e.thisObject,e.useCapture),e.dispose(),e=null;for(var s in r)e=r[s],e.dispose(),e=null,delete r[s]}this.m_pNotifies[n]=null,this.m_pEventLists[n]=null,delete this.m_pNotifies[n],delete this.m_pEventLists[n]},n.prototype.removeEventListeners=function(t){for(var e in this.m_pEventLists){var n=this.m_pEventLists[e];if(n)for(var i in n){var r=n[i];r.thisObject&&r.thisObject.hashCode==t.hashCode&&this.removeEventListener(r.target)}}},n.addEventListener=function(t,e,i,r,o,s,a){n.getInstance().addEventListener(t,e,i,r,o,s)},n.addTouchTapListener=function(t,e,i,r,o,s){n.addEventListener(t,egret.TouchEvent.TOUCH_TAP,e,i,r,o,s)},n.addTouchScaleListener=function(t,e,i,r,o,s){n.addScaleListener(t,.95,e),n.addEventListener(t,egret.TouchEvent.TOUCH_TAP,e,i,r,o)},n.addTouchFloatListener=function(t,e,i,r,o,s){n.addFloatListener(t,3,e),n.addEventListener(t,egret.TouchEvent.TOUCH_TAP,e,i,r,o,s)},n.addTouchScaleStopBubbleListener=function(t,e,i,r,o,s){n.addScaleStopBubbleListener(t,.95,e),n.addEventListener(t,egret.TouchEvent.TOUCH_TAP,e,i,r,o)},n.addScaleListener=function(t,e,i,r,o){void 0===e&&(e=.95),n.getInstance().addScaleListener(t,e,i,r,o)},n.addFloatListener=function(t,e,i,r){void 0===e&&(e=3),n.getInstance().addFloatListener(t,e,i,r)},n.addScaleStopBubbleListener=function(t,e,i,r,o){void 0===e&&(e=.95),n.getInstance().addScaleListener(t,e,i,r,o,!1,!0)},n.addItemRenderAnim=function(t,e){void 0===e&&(e=.95),n.getInstance().addItemRenderAnim(t,e)},n.removeEventListeners=function(t){t&&n.getInstance().removeEventListeners(t)},n}();t.EventManager=n,__reflect(n.prototype,"com_main.EventManager")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(){this.arrCallLoaded=[],this.registerEvents()}return t.prototype.loadResTemp=function(t,e,n,i){var r="res_temp";RES.createGroup(r,t,!0),this.beginLoadGroup(r,e,n,i)},t.prototype.loadGroupWithCall=function(t,e,n,i){if(t.length>1){var r=[];for(var o in t){AGame.warn("arrNameGroup[i]",t[o]);var s=RES.getGroupByName(t[o]);for(var a in s)r.push(s[a].name)}this.loadResTemp(r,e,n,i)}else this.beginLoadGroup(t[0],e,n,i)},t.prototype.beginLoadGroup=function(t,e,n,i){this.arrCallLoaded[t]&&this.arrCallLoaded[t].onDestroy();var r=egret.getDefinitionByName(i),o=new r(e,n);o.addSelf(),this.arrCallLoaded[t]=o,RES.loadGroup(t)},t.prototype.onResourceLoadComplete=function(t){console.info("加载完成 - ",t.groupName);var e=this.arrCallLoaded[t.groupName];e&&(e.loaded(),e.onDestroy(),e=null,this.arrCallLoaded[t.groupName]=null)},t.prototype.onResourceProgress=function(t){var e=this.arrCallLoaded[t.groupName];e&&e.loading(t.itemsLoaded,t.itemsTotal)},t.prototype.onResourceLoadError=function(t){console.warn("Item:"+t.groupName+" - "+t.resItem+" has failed to load"),this.onResourceLoadComplete(t)},t.prototype.registerEvents=function(){RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this)},t.getInst=function(){return this.inst||(this.inst=new t),this.inst},t}();t.ResLoad=e,__reflect(e.prototype,"com_main.ResLoad")}(com_main||(com_main={}));var com_main;!function(t){var e=function(e){function n(t,i){void 0===i&&(i=!1);var r=e.call(this)||this;if(r._distance=0,r._angele=0,r._simulator=!1,r._container=null,r._objs={},r._scale=n.ResetFlag,r.testNext=!1,r.testNext2=!1,r.testCount=0,r._container=t,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,r.mouseDown,r),t.addEventListener(egret.TouchEvent.TOUCH_END,r.mouseUp,r),t.addEventListener(egret.TouchEvent.TOUCH_MOVE,r.mouseMove,r),r.addEventListener(egret.Event.REMOVED,r.remove,r),1==i){var o=!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);1==o&&(r._simulator=i)}return r}return __extends(n,e),n.prototype.remove=function(){this._container.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this._container.removeEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this),this._container.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},n.prototype.mouseDown=function(e){if(this.testCount++,4==this.testCount&&(this.testNext=!1,this.testNext2=!1),1==this._simulator&&0==this.testNext&&(2==this.testCount||4==this.testCount)){this.testNext=!0;var n=this._container.width>>1,i=this._container.height>>2,r=new egret.TouchEvent(egret.TouchEvent.TOUCH_BEGIN,!1,!1,n,i,20161108);this.addPoint(r),r=new egret.TouchEvent(egret.TouchEvent.TOUCH_MOVE,!1,!1,n,i+1,20161108),this.onMove(r)}if(this.getUnNullPropertyNames(this._objs).length<2&&this.addPoint(e),2==this.getUnNullPropertyNames(this._objs).length){var o=this._objs[this.getUnNullPropertyNames(this._objs)[0]],s=this._objs[this.getUnNullPropertyNames(this._objs)[1]],a=new t.MulTouchEvent(t.MulTouchEvent.MULTOUCH_BEGIN);a.center=this.getCenterPoint(o,s),this.dispatchEvent(a)}},n.prototype.mouseMove=function(t){this.onMove(t),this.getUnNullPropertyNames(this._objs).length>=2&&this.dispenseMove()},n.prototype.mouseUp=function(e){if(this.removePoint(e),1==this._simulator&&0==this.testNext2&&(2==this.testCount||4==this.testCount)){this.testNext2=!0;var i=new egret.TouchEvent(egret.TouchEvent.ENDED,!1,!1,0,0,20161108);this.removePoint(i)}this._scale=n.ResetFlag;var r=new t.MulTouchEvent(t.MulTouchEvent.MULTOUCH_END);0!=this.getUnNullPropertyNames(this._objs).length&&(r.remain=this.getUnNullPropertyNames(this._objs)[0]),this.dispatchEvent(r),this._objs={}},n.prototype.getCenterPoint=function(t,e){var n=t.start,i=e.start;return new egret.Point((n.x+i.x)/2,(n.y+i.y)/2)},n.prototype.cloneTouen=function(e){var n=new t.MulTouchObject(e);return n},n.prototype.dispenseMove=function(){var e=this._objs[this.getUnNullPropertyNames(this._objs)[0]],i=this._objs[this.getUnNullPropertyNames(this._objs)[1]],r=t.MulTouchObject.GetScale(e,i),o=0;this._scale==n.ResetFlag?this._scale=r:(o=r-this._scale,this._scale=r);var s=new t.MulTouchEvent(t.MulTouchEvent.MULTOUCH_MOVE);s.scale=r,s.scaleChange=o,s.center=this.getCenterPoint(e,i),this.dispatchEvent(s)},n.prototype.addPoint=function(t){var e=t.touchPointID;if(void 0==this._objs[e]){var n=this.cloneTouen(t);this._objs[e]=n}},n.prototype.removePoint=function(t){var e=t.touchPointID;void 0!=this._objs[e]&&(this._objs[e]=void 0)},n.prototype.onMove=function(t){if(0==this.check(t))return void this.removePoint(t);this.addPoint(t);var e=t.touchPointID;if(void 0!=this._objs[e]){var n=this._objs[e];n.onMove(t)}},n.prototype.check=function(t){var e=t.stageX;t.stageY;return e<n.border||e>this.stage.width-10?!1:e<n.border||e>this.stage.height-10?!1:void 0},n.prototype.getUnNullPropertyNames=function(t){var e=[];for(var n in t)void 0!=t[n]&&e.push(n);return e},n.ResetFlag=-2,n.border=10,n}(egret.DisplayObject);t.MulTouch=e,__reflect(e.prototype,"com_main.MulTouch")}(com_main||(com_main={}));var com_main;!function(t){var e=function(t){function e(e,n,i){return void 0===n&&(n=!1),void 0===i&&(i=!1),t.call(this,e,n,i)||this}return __extends(e,t),e.MULTOUCH_BEGIN="mul_touch_begin",e.MULTOUCH_MOVE="mul_touch_move",e.MULTOUCH_END="mul_touch_end",e}(egret.Event);t.MulTouchEvent=e,__reflect(e.prototype,"com_main.MulTouchEvent")}(com_main||(com_main={}));var com_main;!function(t){var e=function(){function t(t){this.touchId=t.touchPointID,this._start=new egret.Point(t.stageX,t.stageY)}return Object.defineProperty(t.prototype,"start",{get:function(){return this._start},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),t.GetScale=function(t,e){if(0==t.check()||0==e.check())return 1;var n=egret.Point.distance(t.start,e.start);n=0==n?1:n;var i=egret.Point.distance(t.end,e.end);return i/n},t.prototype.onMove=function(t){null==this._end&&(this._end=new egret.Point),this._end.x=t.stageX,this._end.y=t.stageY},t.prototype.getDistance=function(){return 1==this.check()?egret.Point.distance(this._start,this._end):0},t.prototype.check=function(){return null==this._start||null==this._end?!1:!0},t}();t.MulTouchObject=e,__reflect(e.prototype,"com_main.MulTouchObject")}(com_main||(com_main={})),window.Main=Main;